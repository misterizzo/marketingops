!function(s){"use strict";var r={init:function(){s(document.body).on("keyup change",".ld-form__field--needs-password-strength, form.ldregister #password",this.strengthMeter)},strengthMeter:function(e){let t=s(e.target),a=t.closest("form"),d=a.find('input[type="submit"]'),n=1,o=t.val();r.includeMeter(a,t),n=r.checkPasswordStrength(a,t),document.dispatchEvent(new CustomEvent("learndashPasswordFieldChange",{detail:{wrapper:a,field:t}})),t.is(".ld-form__field")||(o.length>0&&n<learndash_password_strength_meter_params.min_password_strength&&-1!==n&&learndash_password_strength_meter_params.stop_register?d.attr("disabled","disabled").addClass("disabled"):d.prop("disabled",!1).removeClass("disabled"))},includeMeter:function(r,e){let t=r.find(".ld-password-strength"),a=s(e);if(""===e.val())t.hide(),s(document.body).trigger("learndash-password-strength-hide");else if(0===t.length){let r=e,t=a.closest(".ld-form__field-wrapper");t.length&&(r=t),r.after('<div id="ld-password-strength__meter" class="learndash-password-strength ld-password-strength" aria-live="polite"></div>'),s(document.body).trigger("learndash-password-strength-added")}else t.show(),s(document.body).trigger("learndash-password-strength-show")},checkPasswordStrength:function(r,e){let t=r.find(".learndash-password-strength"),a=r.find(".learndash-password-hint"),d='<small class="learndash-password-hint ld-password-strength__hint ld-password-strength__hint--injected">'+learndash_password_strength_meter_params.i18n_password_hint+"</small>",n=wp.passwordStrength.meter(e.val(),wp.passwordStrength.userInputDisallowedList()),o="",l=r.find(".ld-password-strength__hint:not(.ld-password-strength__hint--injected)"),i=s(e);if(t.removeClass("short bad good strong"),a.remove(),t.is(":hidden"))return this.clearFieldStatus(i),n;n<learndash_password_strength_meter_params.min_password_strength&&(o=`<span class="ld-password-strength__error"> - ${learndash_password_strength_meter_params.i18n_password_error}</span>`);const p={0:{meterClass:"short",descriptor:pwsL10n.short+o,isError:!0},1:{meterClass:"bad",descriptor:pwsL10n.bad+o,isError:!0},2:{meterClass:"bad",descriptor:pwsL10n.bad+o,isError:!0},3:{meterClass:"good",descriptor:pwsL10n.good,isError:!1},4:{meterClass:"strong",descriptor:pwsL10n.strong,isError:!1},5:{meterClass:"short",descriptor:pwsL10n.mismatch,isError:!0}};return void 0===p[n]||(this.clearFieldStatus(i),t.addClass(p[n].meterClass).html('<span class="ld-password-strength__prefix-marker ld-password-strength__prefix-marker-1"></span><span class="ld-password-strength__prefix-marker ld-password-strength__prefix-marker-2"></span><span class="ld-password-strength__prefix-marker ld-password-strength__prefix-marker-3"></span><span class="ld-password-strength__prefix-marker ld-password-strength__prefix-marker-4"></span><span class="ld-password-strength__descriptor">'+p[n].descriptor+"</span>").after(l.length?"":d),!0===p[n].isError?i.addClass("ld-form__field--error"):i.addClass("ld-form__field--valid")),n},clearFieldStatus:function(s){s.removeClass("ld-form__field--valid ld-form__field--error")}};r.init()}(jQuery);