!function(){function e(e,n){const i={action:"ld_cg_apply_filter",nonce:LearnDash_Course_Grid.nonce.load_posts,filter:t(n),course_grid:{...e.dataset}};i.filter=JSON.stringify(i.filter),i.course_grid=JSON.stringify(i.course_grid),fetch(LearnDash_Course_Grid.ajaxurl,{method:"POST",credentials:"same-origin",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams(i)}).then((e=>e.json())).then((t=>{if(void 0!==t&&"success"==t.status){const n=e.querySelector(".items-wrapper");if(n.style.visibility="hidden",n.innerHTML=t.html,e.dataset.page=t.page,e.querySelector(".pagination")||e.insertAdjacentHTML("beforeend",t.html_pagination),""==t.html_pagination){const t=e.querySelector(".pagination");t&&t.remove()}"grid"==e.dataset.skin?setTimeout((function(){learndash_course_grid_init_grid_responsive_design()}),500):"masonry"==e.dataset.skin?setTimeout((function(){learndash_course_grid_init_masonry(e.querySelector(".masonry"))}),500):setTimeout((function(){n.style.visibility="visible"}),500)}})).catch((e=>{console.log(e)}))}function t(e){const t={};if(!e)return t;const n=e.querySelector('input[name="search"]'),i=e.querySelector('[name="price_min"]'),r=e.querySelector('[name="price_max"]');t.search=n?n.value:null;let a=e.dataset.taxonomies;return a=a.split(",").map((function(e){return e.trim()})),t.price_min=i?i.value:null,t.price_max=r?r.value:null,a.forEach((function(n){const i=e.querySelectorAll('input[name="'+n+'[]"]:checked'),r=[];i.forEach((function(e){r.push(e.value)})),t[n]=r})),t}document.addEventListener("click",(function(e){const t=e.target;t.matches(".learndash-course-grid .toggle-filter")&&("none"===t.nextElementSibling.style.display||""===t.nextElementSibling.style.display?(t.classList.remove("closed"),t.classList.add("opened"),t.nextElementSibling.style.display="block"):(t.classList.remove("opened"),t.classList.add("closed"),t.nextElementSibling.style.display="none"))}));const n=document.querySelectorAll(".learndash-course-grid-filter .button.apply");n&&n.forEach((function(t){t.addEventListener("click",(function(t){t.preventDefault();const n=this.closest(".learndash-course-grid-filter");n&&e(document.getElementById(n.dataset.course_grid_id),n),n.previousElementSibling&&n.previousElementSibling.classList.contains("toggle-filter")&&(n.previousElementSibling.classList.remove("opened"),n.previousElementSibling.classList.add("closed"),n.style.display="none")}))}));const i=document.querySelectorAll(".learndash-course-grid-filter .button.clear");i&&i.forEach((function(t){t.addEventListener("click",(function(t){t.preventDefault();const n=this.closest(".learndash-course-grid-filter");if(n){const t=n.querySelector('input[name="search"]'),i=n.querySelector('input[name="price_min"]'),r=n.querySelector('input[name="price_max"]'),a=n.querySelector('input[name="price_min_range"]'),s=n.querySelector('input[name="price_max_range"]');t&&(n.querySelector('input[name="search"]').value=""),i&&(n.querySelector('input[name="price_min"]').value=""),r&&(n.querySelector('input[name="price_max"]').value=""),a&&(n.querySelector('input[name="price_min_range"]').value=""),s&&(n.querySelector('input[name="price_max_range"]').value=""),n.dataset.taxonomies.split(",").forEach((function(e){""!=(e=e.trim())&&n.querySelectorAll('input[name="'+e+'[]"]:not([disabled])').forEach((function(e){e.checked=!1}))})),e(document.getElementById(n.dataset.course_grid_id),n),n.previousElementSibling&&n.previousElementSibling.classList.contains("toggle-filter")&&(n.previousElementSibling.classList.remove("opened"),n.previousElementSibling.classList.add("closed"),n.style.display="none")}}))})),document.addEventListener("input",(function(e){if(e.target.classList.contains("range")){const t=e.target.name,n=e.target.value,i=e.target.closest(".filter");switch(t){case"price_min_range":i.querySelector('[name="price_min"]').value=n;break;case"price_max_range":i.querySelector('[name="price_max"]').value=n}}if(null!==e.target.closest(".number-wrapper")&&"number"==e.target.type){const t=e.target.name,n=e.target.value,i=e.target.closest(".filter");switch(t){case"price_min":i.querySelector('[name="price_min_range"]').value=n;break;case"price_max":i.querySelector('[name="price_max_range"]').value=n}}})),document.addEventListener("click",(function(e){const n=e.target;if(!n.matches('.learndash-course-grid[data-pagination="button"] .pagination .load-more'))return;e.preventDefault();const i=n.closest(".learndash-course-grid"),r=document.querySelector('.learndash-course-grid-filter[data-course_grid_id="'+i.id+'"]'),a={action:"ld_cg_load_more",nonce:LearnDash_Course_Grid.nonce.load_posts,course_grid:JSON.stringify(i.dataset),filter:JSON.stringify(t(r))};fetch(LearnDash_Course_Grid.ajaxurl+"?"+new URLSearchParams(a),{method:"GET",headers:{"Content-Type":"application/json"}}).then((e=>e.json())).then((e=>{if(void 0!==e&&"success"==e.status){if(i.querySelector(".items-wrapper").insertAdjacentHTML("beforeend",e.html),"complete"!==e.page&&(i.dataset.page=e.page),"complete"==e.page){const e=i.querySelector(".pagination");e&&e.remove()}"grid"==i.dataset.skin&&""!=e.html?setTimeout((function(){learndash_course_grid_init_grid_responsive_design()}),500):"masonry"==i.dataset.skin&&""!=e.html&&(i.style.visibility="hidden",setTimeout((function(){learndash_course_grid_init_masonry(i.querySelector(".masonry")),i.style.visibility="visible"}),500))}})).catch((e=>{console.log(e)}))}));let r=!1;document.addEventListener("scroll",(function(){const e=document.querySelectorAll('.learndash-course-grid[data-pagination="infinite"] .pagination');e&&e.forEach((function(e){(function(e){const t=e.getBoundingClientRect();return!(t.top>innerHeight||t.bottom<0)})(e)&&!r&&(r=!0,function(e){const n=e.closest(".learndash-course-grid");if(!n)return r=!1,!1;const i=document.querySelector('.learndash-course-grid-filter[data-course_grid_id="'+n.id+'"]'),a={action:"ld_cg_load_more",nonce:LearnDash_Course_Grid.nonce.load_posts,course_grid:JSON.stringify(n.dataset),filter:JSON.stringify(t(i))};fetch(LearnDash_Course_Grid.ajaxurl+"?"+new URLSearchParams(a),{method:"GET",headers:{"Content-Type":"application/json"}}).then((e=>e.json())).then((e=>{void 0!==e&&"success"==e.status&&(n.querySelector(".items-wrapper").insertAdjacentHTML("beforeend",e.html),"complete"!==e.page&&(n.dataset.page=e.page),"infinite"==n.dataset.pagination&&(r=!1),"complete"==e.page&&n.querySelector(".pagination").remove(),"grid"==n.dataset.skin?setTimeout((function(){learndash_course_grid_init_grid_responsive_design()}),500):"masonry"==n.dataset.skin&&(n.style.visibility="hidden",setTimeout((function(){learndash_course_grid_init_masonry(n.querySelector(".masonry")),n.style.visibility="visible"}),500)))})).catch((e=>{console.log(e)}))}(e))}))}))}();