const learndash=window.learndash||{};learndash.forms=learndash.forms||{},learndash.forms.sortable=learndash.forms.sortable||{},function(e){e.wpProQuizFront=function(t,i){const o=e(t),s=i;let n={};const r=this;let a=new Object,u=new Object,d=0,c=null,l=[],p="",h=!1,_=1,m=0,f=null,w="",Q=!1,z="",v=0,g=!1,q={};1==s.ld_script_debug&&console.log("config[%o]",s);const P={randomAnswer:0,randomQuestion:0,disabledAnswerMark:0,checkBeforeStart:0,preview:0,cors:0,isAddAutomatic:0,quizSummeryHide:0,skipButton:0,reviewQustion:0,autoStart:0,forcingQuestionSolve:0,hideQuestionPositionOverview:0,formActivated:0,maxShowQuestion:0,sortCategories:0},y={isQuizStart:0,isLocked:0,loadLock:0,isPrerequisite:0,isUserStartLocked:0},k='input[name="check"]',x='input[name="next"]',S='input[name="tip"]',b=".wpProQuiz_questionList",C='input[name="skip"]',I='input[name="wpProQuiz_pageLeft"]',j='input[name="wpProQuiz_pageRight"]';let T={self:o,back:o.find('input[name="back"]'),next:o.find(x),quiz:o.find(".wpProQuiz_quiz"),questionList:o.find(".wpProQuiz_list"),results:o.find(".wpProQuiz_results"),sending:o.find(".wpProQuiz_sending"),quizStartPage:o.find(".wpProQuiz_text"),timelimit:o.find(".wpProQuiz_time_limit"),toplistShowInButton:o.find(".wpProQuiz_toplistShowInButton"),listItems:e()};const L={token:"",isUser:0},E=0,A=1,D={counter:s.timelimit,intervalId:0,instance:{},timer_cookie:"ldadv-time-limit-"+s.user_id+"-"+s.quizId,stop(){this.counter&&(e.removeCookie(this.timer_cookie),window.clearInterval(this.intervalId),T.timelimit.hide())},start(){if(!this.counter)return;this.timer_cookie,e.cookie.raw=!0;const t=1e3*this.counter;let i=jQuery.cookie(this.timer_cookie),o=0;o=i||this.counter;const n=learndash_prepare_quiz_resume_data(s);!1!==n&&n[this.timer_cookie]&&(o=n[this.timer_cookie]);const a=1e3*o,u=T.timelimit.find("span").text(r.methode.parseTime(o)),d=T.timelimit.find(".wpProQuiz_progress");T.timelimit.show();const c=+new Date;this.intervalId=window.setInterval(function(){const o=+new Date-c,s=a-o;o>=500&&(i=s/1e3,u.text(r.methode.parseTime(Math.ceil(i))),e.cookie(this.timer_cookie,i)),d.css("width",s/t*100+"%"),s<=0&&(this.stop(),r.methode.finishQuiz(!0))}.bind(this),16),"1"===s.quiz_resume_enabled&&r.methode.startCookieSendTimer()}},O=new function(){let t=[],i=[],n=[],a=[],u=0,d=0,c=0,l=0,p=0;const h=[];function _(e){const t=h[e];if(a.eq(e).removeClass("wpProQuiz_reviewQuestionSolved wpProQuiz_reviewQuestionReview wpProQuiz_reviewQuestionSkip"),0===Object.keys(t).length)return;let i="";t.correct?i="wpProQuiz_reviewQuestionSolvedCorrect":t.incorrect?i="wpProQuiz_reviewQuestionSolvedIncorrect":!0===t.solved||!1===t.solved?i="wpProQuiz_reviewQuestionSolved":t.review?i="wpProQuiz_reviewQuestionReview":t.skip&&(i="wpProQuiz_reviewQuestionSkip"),""!=i&&a.eq(e).addClass(i)}function m(e){e.preventDefault();let t=e.pageY-d;t<0&&(t=0),t>u&&(t=u);const o=c*t;n.attr("style","margin-top: "+-o+"px !important"),i.css({top:t})}function f(t){t.preventDefault(),e(document).unbind(".scrollEvent")}function w(){r.methode.saveMetaDataToCookie({reviewBox:h})}this.init=function(){t=o.find(".wpProQuiz_reviewQuestion"),i=t.find("div"),n=t.find("ol"),a=n.children(),2!=s.mode&&(e(".wpProQuiz_reviewLegend li.learndash-quiz-review-legend-item-correct").hide(),e(".wpProQuiz_reviewLegend li.learndash-quiz-review-legend-item-incorrect").hide()),this.reset();const u=learndash_prepare_quiz_resume_data(s);1==s.ld_script_debug&&console.log("resume_data[%o]",u),void 0!==u.reviewBox&&jQuery(u.reviewBox).each((function(e,t){if("object"==typeof t){const e=t;t={},void 0!==e.solved&&(t.solved=!0),void 0!==e.correct&&(t.correct=!0),void 0!==e.incorrect&&(t.incorrect=!0),void 0!==e.skip&&(t.skip=!0),void 0!==e.review&&(t.review=!0)}h[e]=t,_(e)})),i.on("mousedown",(function(t){t.preventDefault(),t.stopPropagation(),d=t.pageY-i.offset().top+l,e(document).on("mouseup.scrollEvent",f),e(document).on("mousemove.scrollEvent",m)})),a.on("click",(function(t){r.methode.showQuestion(e(this).index())})),o.on("questionSolved",(function(e){h[e.values.index].solved=e.values.solved,_(e.values.index),w()})),o.on("questionSolvedCorrect",(function(e){h[e.values.index].correct=!0,_(e.values.index),w()})),o.on("questionSolvedIncorrect",(function(e){h[e.values.index].incorrect=!0,_(e.values.index),w()})),o.on("changeQuestion",(function(e){if("undefined"!=e.values.item[0]){e.values.item[0];r.methode.setupMatrixSortHeights()}a.removeClass("wpProQuiz_reviewQuestionTarget"),a.eq(e.values.index).addClass("wpProQuiz_reviewQuestionTarget"),e.values.index})),o.on("skipQuestion",(function(e){h[e.values.index].skip=!h[e.values.index].skip,_(e.values.index),w()})),o.on("reviewQuestion",(function(e){h[e.values.index].review=!h[e.values.index].review,_(e.values.index),w()}))},this.show=function(e){if(P.reviewQustion&&t.parent().show(),o.find(".wpProQuiz_reviewDiv .wpProQuiz_button2").show(),e)return;n.attr("style","margin-top: 0px !important"),i.css({top:0});const s=n.outerHeight(),r=t.height();u=r-i.height(),d=0,p=s-r,c=p/u,s>100&&i.show(),l=i.offset().top},this.hide=function(){t.parent().hide()},this.toggle=function(){if(P.reviewQustion){e(".wpProQuiz_reviewLegend li.learndash-quiz-review-legend-item-current").hide(),e(".wpProQuiz_reviewLegend li.learndash-quiz-review-legend-item-review").hide(),e(".wpProQuiz_reviewLegend li.learndash-quiz-review-legend-item-answered").hide(),e(".wpProQuiz_reviewLegend li.learndash-quiz-review-legend-item-correct").show(),e(".wpProQuiz_reviewLegend li.learndash-quiz-review-legend-item-incorrect").show(),t.parent().toggle(),a.removeClass("wpProQuiz_reviewQuestionTarget"),o.find(".wpProQuiz_reviewDiv .wpProQuiz_button2").hide(),n.attr("style","margin-top: 0px !important"),i.css({top:0});const s=n.outerHeight(),r=t.height();u=r-i.height(),d=0,p=s-r,c=p/u,s>100&&i.show(),l=i.offset().top}},this.reset=function(){for(let e=0,t=a.length;e<t;e++)h[e]={};a.removeClass("wpProQuiz_reviewQuestionTarget"),a.removeClass("wpProQuiz_reviewQuestionSolved"),a.removeClass("wpProQuiz_reviewQuestionReview")}};const M=new function(){let e=0,t=-1,i=0,o=!1;this.questionStart=function(i){-1!=t&&this.questionStop(),t=i,e=+new Date},this.questionStop=function(){-1!=t&&(a[t].time+=Math.round((new Date-e)/1e3),t=-1)},this.startQuiz=function(){o&&this.stopQuiz(),i=+new Date,"1"===s.quiz_resume_enabled&&"string"==typeof s.quiz_resume_quiz_started&&"0"!==s.quiz_resume_quiz_started&&(i=parseInt(s.quiz_resume_quiz_started,10)),o=!0},this.getQuizStart=function(){if(o)return i},this.stopQuiz=function(){o&&(quizEndTimer=+new Date,a.comp.quizTime+=Math.round((quizEndTimer-i)/1e3),a.comp.quizEndTimestamp=quizEndTimer,a.comp.quizStartTimestamp=i,o=!1)},this.init=function(){}},R=function(t,i,o,s,n){null==n&&(n=!0);let a={};return{singleMulti(){const t=s.find(".wpProQuiz_questionInput");1==n&&s.find(".wpProQuiz_questionInput").attr("disabled","disabled"),jQuery(".wpProQuiz_questionListItem",s).each((function(i){const o=e(this).attr("data-pos");void 0!==o&&(a[o]=t.eq(i).is(":checked"))}))},sort_answer(){const e=s.children(".wpProQuiz_questionListItem");let t=0;e.each((function(e,i){const o=jQuery(i).data("pos");void 0!==o&&(a[t]=o,t++)})),!0===n&&(s.hasClass(".ld-sortable--sort_answer")?learndash.forms.sortable.destroySortable(s[0]??null):(s.sortable(),s.sortable("disable")))},matrix_sort_answer(){const t=s.children();new Array;statistcAnswerData={0:-1},t.each((function(){const t=e(this),i=t.attr("data-pos"),o=t.find(".wpProQuiz_maxtrixSortCriterion").children();o.length&&(statistcAnswerData[o.attr("data-pos")]=i),a=statistcAnswerData})),a=statistcAnswerData,1==n&&(o.find(".wpProQuiz_sortStringList, .wpProQuiz_maxtrixSortCriterion").sortable(),o.find(".wpProQuiz_sortStringList, .wpProQuiz_maxtrixSortCriterion").sortable("disable"))},free_answer(){const e=s.children(),t=e.find(".wpProQuiz_questionInput").val();1==n&&e.find(".wpProQuiz_questionInput").attr("disabled","disabled"),a=t},cloze_answer(){a={},s.find(".wpProQuiz_cloze").each((function(t,i){const o=e(this).children(),s=o.eq(0),u=(o.eq(1),r.methode.cleanupCurlyQuotes(s.val()));a[t]=u,1==n&&s.attr("disabled","disabled")}))},assessment_answer(){correct=!0;const t=s.find(".wpProQuiz_questionInput");1==n&&s.find(".wpProQuiz_questionInput").attr("disabled","disabled");let i=0;t.filter(":checked").each((function(){i+=parseInt(e(this).val())})),a=i},essay(){const e=o.find(".wpProQuiz_questionList").data("question_id");1==n&&s.find(".wpProQuiz_questionEssay").attr("disabled","disabled");const t=s.find(".wpProQuiz_questionEssay").val(),i=s.find("#uploadEssayFile_"+e).val();void 0!==t&&(a=t),void 0!==i&&(a=i)}}[t](),{response:a}};function F(t,i,s,n,a){a=a||!1;if("single"==t.type||"multiple"==t.type)n.children().each((function(t){const n=e(this),r=n.attr("data-pos");if(null!=i[r]){1==i[r]&&(e(".wpProQuiz_questionInput",n).prop("checked","checked"),a&&(s.find(".wpProQuiz_questionInput").attr("disabled","disabled"),s.find(".wpProQuiz_questionInput").css("pointer-events","none"),N(s)),o.trigger({type:"questionSolved",values:{item:s,index:s.index(),solved:!0}}))}}));else if("free_answer"==t.type)i=learndash_decodeHTML(i),n.children().each((function(t){e(this);e(".wpProQuiz_questionInput",this).val(i),a&&(e(".wpProQuiz_questionInput",this).attr("disabled","disabled"),e(".wpProQuiz_questionInput",this).css("pointer-events","none"),N(s))})),o.trigger({type:"questionSolved",values:{item:s,index:s.index(),solved:!0}});else if("sort_answer"===t.type)jQuery.each(i,(function(t,i){const o=e('.wpProQuiz_questionListItem[data-pos="'+i+'"]',n),r=e(".wpProQuiz_sortable",o);e(r).text();jQuery(n).append(o),a&&(n.hasClass("ld-sortable--sort_answer")?learndash.forms.sortable.destroySortable(n[0]??null):(jQuery(n).sortable(),jQuery(n).sortable("disable")),N(s))})),o.trigger({type:"questionSolved",values:{item:s,index:s.index(),solved:!0}});else if("matrix_sort_answer"==t.type)jQuery.each(i,(function(t,i){const o=e('.wpProQuiz_matrixSortString .wpProQuiz_sortStringList li[data-pos="'+t+'"]',s),r=e('.wpProQuiz_questionListItem[data-pos="'+i+'"] ul.wpProQuiz_maxtrixSortCriterion',n);jQuery(o).appendTo(r),a&&(jQuery(r).sortable(),jQuery(r).sortable("disable"),N(s))})),o.trigger({type:"questionSolved",values:{item:s,index:s.index(),solved:!0}});else if("cloze_answer"==t.type)jQuery('span.wpProQuiz_cloze input[type="text"]',n).each((function(t){void 0!==i[t]&&(e(this).val(learndash_decodeHTML(i[t])),a&&(e(this).attr("disabled","disabled"),N(s)))})),o.trigger({type:"questionSolved",values:{item:s,index:s.index(),solved:!0}});else if("assessment_answer"==t.type)e('input.wpProQuiz_questionInput[value="'+i+'"]',n).attr("checked","checked"),a&&(e('input.wpProQuiz_questionInput[value="'+i+'"]',n).attr("disabled","disabled"),N(s)),o.trigger({type:"questionSolved",values:{item:s,index:s.index(),solved:!0}});else if("essay"==t.type)if(n.find("#uploadEssayFile_"+t.id).length){const r=n.find("#uploadEssayFile_"+t.id);e(r).val(i),e("<p>"+function(e){if(null!=e)return e.split("/").reverse()[0];return""}(i)+"</p>").insertAfter(r),a&&(n.find('form[name="uploadEssay"]').css("pointer-events","none"),N(s)),o.trigger({type:"questionSolved",values:{item:s,index:s.index(),solved:!0}})}else n.find(".wpProQuiz_questionEssay").length&&(n.find(".wpProQuiz_questionEssay").text(learndash_decodeHTML(i)),a&&(n.find(".wpProQuiz_questionEssay").attr("disabled","disabled"),N(s)),o.trigger({type:"questionSolved",values:{item:s,index:s.index(),solved:!0}}));a&&r.methode.setCheckedStatusFromData(t,s,n)}function N(e){e.find(k).hide(),e.find(S).hide(),e.find(C).hide(),e.find(x).show(),e.find(x).attr("data-question-lock",!0)}const B={funcs:{isEmpty:e=>!(e=e.trim())||0===e.length},typeConst:{TEXT:0,TEXTAREA:1,NUMBER:2,CHECKBOX:3,EMAIL:4,YES_NO:5,DATE:6,SELECT:7,RADIO:8},checkForm(){let t=!0;const i=this;return o.find(".wpProQuiz_forms input, .wpProQuiz_forms textarea, .wpProQuiz_forms .wpProQuiz_formFields, .wpProQuiz_forms select").each((function(){const o=e(this),s=1==o.data("required"),n=o.data("type");let r=!0;const a=o.val().trim();switch(n){case i.typeConst.TEXT:case i.typeConst.TEXTAREA:case i.typeConst.SELECT:s&&(r=!i.funcs.isEmpty(a));break;case i.typeConst.NUMBER:!s&&i.funcs.isEmpty(a)||(r=!i.funcs.isEmpty(a)&&!isNaN(a));break;case i.typeConst.EMAIL:!s&&i.funcs.isEmpty(a)||(r=!i.funcs.isEmpty(a)&&new RegExp(/^[a-zA-Z0-9.!#$%&’*+/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:\.[a-zA-Z0-9-]+)*$/).test(a));break;case i.typeConst.CHECKBOX:s&&(r=o.is(":checked"));break;case i.typeConst.YES_NO:case i.typeConst.RADIO:s&&(r=void 0!==o.find('input[type="radio"]:checked').val());break;case i.typeConst.DATE:var u=0,d=0;o.find("select").each((function(){u++,d+=i.funcs.isEmpty(e(this).val())?0:1})),(s||d>0)&&(r=u==d)}r?o.siblings(".wpProQuiz_invalidate").hide():(t=!1,o.siblings(".wpProQuiz_invalidate").show())})),t},getFormData(){const t={},i=this;return o.find(".wpProQuiz_forms input, .wpProQuiz_forms textarea, .wpProQuiz_forms .wpProQuiz_formFields, .wpProQuiz_forms select").each((function(){const o=e(this),s=o.data("form_id");switch(o.data("type")){case i.typeConst.TEXT:case i.typeConst.TEXTAREA:case i.typeConst.SELECT:case i.typeConst.NUMBER:case i.typeConst.EMAIL:t[s]=o.val();break;case i.typeConst.CHECKBOX:t[s]=o.is(":checked")?1:0;break;case i.typeConst.YES_NO:case i.typeConst.RADIO:t[s]=o.find('input[type="radio"]:checked').val();break;case i.typeConst.DATE:t[s]={day:o.find('select[name="wpProQuiz_field_'+s+'_day"]').val(),month:o.find('select[name="wpProQuiz_field_'+s+'_month"]').val(),year:o.find('select[name="wpProQuiz_field_'+s+'_year"]').val()}}})),t},saveFormDataToCookie(){const t={},i=this;o.find(".wpProQuiz_forms input, .wpProQuiz_forms textarea, .wpProQuiz_forms .wpProQuiz_formFields, .wpProQuiz_forms select").each((function(){const o=e(this),s=o.data("form_id");if(void 0===s)return;const n=o.data("type");switch(t.id=s,n){case i.typeConst.TEXT:case i.typeConst.TEXTAREA:case i.typeConst.SELECT:case i.typeConst.NUMBER:case i.typeConst.EMAIL:t.value=o.val(),t.type=n;break;case i.typeConst.CHECKBOX:t.value=o.is(":checked")?1:0,t.type=n;break;case i.typeConst.YES_NO:case i.typeConst.RADIO:t.value=o.find('input[type="radio"]:checked').val(),t.type=n;break;case i.typeConst.DATE:t.value={day:o.find('select[name="wpProQuiz_field_'+s+'_day"]').val(),month:o.find('select[name="wpProQuiz_field_'+s+'_month"]').val(),year:o.find('select[name="wpProQuiz_field_'+s+'_year"]').val()},t.type=n}r.methode.CookieSaveResponse("formData"+t.id,t.id,t.type,t.value)}))},setFormDataFromServer(){if("1"!==s.quiz_resume_enabled)return;if(null==s.quiz_resume_data)return;const t=learndash_prepare_quiz_resume_data(s);if(!1===t)return;const i=this;o.find(".wpProQuiz_forms input, .wpProQuiz_forms textarea, .wpProQuiz_forms .wpProQuiz_formFields, .wpProQuiz_forms select").each((function(){const o=e(this),s=o.data("form_id"),n=o.data("type"),r="formData"+s;if(t[r]&&t[r].type===n)switch(n){case i.typeConst.TEXT:case i.typeConst.TEXTAREA:case i.typeConst.SELECT:case i.typeConst.NUMBER:case i.typeConst.EMAIL:var a=t[r].value;a=learndash_decodeHTML(a),o.val(a);break;case i.typeConst.CHECKBOX:t[r].value&&o.attr("checked",!0);break;case i.typeConst.YES_NO:case i.typeConst.RADIO:t[r].value&&o.find('input[type="radio"][value="'+t[r].value+'"]').attr("checked",!0);break;case i.typeConst.DATE:o.find('select[name="wpProQuiz_field_'+s+'_day"]').val(t[r].value.day),o.find('select[name="wpProQuiz_field_'+s+'_month"]').val(t[r].value.month),o.find('select[name="wpProQuiz_field_'+s+'_year"]').val(t[r].value.year)}}))}};r.methode={parseBitOptions(){if(s.bo){P.randomAnswer=1&s.bo,P.randomQuestion=2&s.bo,P.disabledAnswerMark=4&s.bo,P.checkBeforeStart=8&s.bo,P.preview=16&s.bo,P.isAddAutomatic=64&s.bo,P.reviewQustion=128&s.bo,P.quizSummeryHide=256&s.bo,P.skipButton=512&s.bo,P.autoStart=1024&s.bo,P.forcingQuestionSolve=2048&s.bo,P.hideQuestionPositionOverview=4096&s.bo,P.formActivated=8192&s.bo,P.maxShowQuestion=16384&s.bo,P.sortCategories=32768&s.bo;const e=32&s.bo;e&&null!=jQuery.support&&null!=jQuery.support.cors&&0==jQuery.support.cors&&(P.cors=e)}},setClozeStyle(){o.find(".wpProQuiz_cloze input").each((function(){const t=e(this);let i="";const o=t.data("wordlen");for(let e=0;e<o;e++)i+="w";const s=e(document.createElement("span")).css("visibility","hidden").text(i).appendTo(e("body")),n=s.width();s.remove(),t.width(n+5)}))},parseTime(e){let t=parseInt(e%60),i=parseInt(e/60%60),o=parseInt(e/3600%24);return t=(t>9?"":"0")+t,i=(i>9?"":"0")+i,o=(o>9?"":"0")+o,o+":"+i+":"+t},cleanupCurlyQuotes:e=>(e=(e=(e=(e=e.replace(/\u2018/,"'")).replace(/\u2019/,"'")).replace(/\u201C/,'"')).replace(/\u201D/,'"')).trim(),resetMatrix(t){t.each((function(){const t=e(this),i=t.find(".wpProQuiz_sortStringList");t.find(".wpProQuiz_sortStringItem").each((function(){i.append(e(this))}))}))},marker(e,t){P.disabledAnswerMark||(!0===t?e.addClass("wpProQuiz_answerCorrect"):!1===t?e.addClass("wpProQuiz_answerIncorrect"):e.addClass(t))},startQuiz(t){if(1==s.ld_script_debug&&console.log("in startQuiz"),y.loadLock)return void(y.isQuizStart=1);if(y.isQuizStart=0,y.isLocked)return T.quizStartPage.hide(),void o.find(".wpProQuiz_lock").show();if(y.isPrerequisite)return T.quizStartPage.hide(),void o.find(".wpProQuiz_prerequisite").show();if(y.isUserStartLocked)return T.quizStartPage.hide(),void o.find(".wpProQuiz_startOnlyRegisteredUser").show();if(P.maxShowQuestion&&!t){if(s.formPos==E&&!B.checkForm())return;return T.quizStartPage.hide(),o.find(".wpProQuiz_loadQuiz").show(),void r.methode.loadQuizDataAjax(!0)}if(P.formActivated&&s.formPos==E&&!B.checkForm())return;switch(r.methode.loadQuizData(),q=learndash_prepare_quiz_resume_data(s),!1===q&&(q={}),M.startQuiz(),P.randomQuestion&&jQuery.isEmptyObject(q)&&!q.randomQuestions&&r.methode.random(T.questionList,"question"),P.randomAnswer&&r.methode.random(o.find(b)),P.sortCategories&&r.methode.sortCategories(),r.methode.random(o.find(".wpProQuiz_sortStringList")),o.find(".wpProQuiz_listItem").each((function(t,i){const o=e(this);o.find(".wpProQuiz_question_page span:eq(0)").text(t+1),o.find("> h5 span").text(t+1),o.find(".wpProQuiz_questionListItem").each((function(t,i){e(this).find("> span:not(.wpProQuiz_cloze)").text(t+1+". ")}))})),T.next=o.find(x),s.mode){case 3:o.find('input[name="checkSingle"]').show();break;case 2:o.find(k).show(),!P.skipButton&&P.reviewQustion&&o.find(C).show();break;case 1:o.find('input[name="back"]').slice(1).show();case 0:T.next.show()}(P.hideQuestionPositionOverview||3==s.mode)&&o.find(".wpProQuiz_question_page").hide();const n=T.next.last();p=n.val(),n.val(s.lbn);const h=T.questionList.children();T.listItems=o.find(".wpProQuiz_list > li"),3===s.mode&&"number"!=typeof q.lastQuestion&&r.methode.showSinglePage(0),"number"!=typeof q.lastQuestion&&(q.lastQuestion=0),3!==s.mode?(1==s.ld_script_debug&&console.log("line 1359: quiz_resume_data.lastQuestion[%o]",q.lastQuestion),q.lastQuestion>0?h.each((function(t,i){const o=e(i).find(".wpProQuiz_questionList").data("question_id");if(1==s.ld_script_debug&&console.log("q_id[%o] quiz_resume_data.lastQuestion[%o]",o,q.lastQuestion),o===q.lastQuestion)return c=h.eq(t),1==s.ld_script_debug&&(console.log("currentQuestion[%o]",c),console.log("$listItem[%o]",h)),!1})):(1==s.ld_script_debug&&(console.log("line 1382: ELSE: quiz_resume_data.lastQuestion zero"),console.log("$listItem[%o]",h)),c=h.eq(0),1==s.ld_script_debug&&console.log("currentQuestion[%o]",c),h.eq(0).show())):(1==s.ld_script_debug&&console.log("line 1390: ELSE: condif.mode = 3"),c=h.eq(0)),1==s.ld_script_debug&&console.log("after currentQuestion[%o]",c),o.find(".wpProQuiz_sortable:not(.ld-sortable__item-handle)").each((function(t,i){e(i).parents(".wpProQuiz_questionList").sortable({scroll:!0,scrollSensitivity:10,scrollSpeed:10,update(){const t=e(this).parents(".wpProQuiz_listItem");o.trigger({type:"questionSolved",values:{item:t,index:t.index(),solved:!0}})}}).disableSelection()})),o.find(".ld-sortable--sort_answer").each((function(t,i){let s=i?.ldSortable;s||(s=learndash.forms.sortable.initSortable(i));const n=(t,i)=>{const s=e(t).parents(".wpProQuiz_listItem");o.trigger({type:"questionSolved",values:{item:s,index:s.index(),solved:!0}})};s.on("dropped",n),s.on("reorder",n)})),o.find(".wpProQuiz_sortStringList, .wpProQuiz_maxtrixSortCriterion").sortable({connectWith:".wpProQuiz_maxtrixSortCriterion:not(:has(li)), .wpProQuiz_sortStringList",placeholder:"wpProQuiz_placehold",scroll:!0,scrollSensitivity:10,scrollSpeed:10,update(t,i){const s=e(this).parents(".wpProQuiz_listItem");o.trigger({type:"questionSolved",values:{item:s,index:s.index(),solved:!0}})}}).disableSelection(),l=[],D.start(),d=+new Date,a={comp:{points:0,correctQuestions:0,quizTime:0}},o.find(".wpProQuiz_questionList").each((function(){const t=e(this).data("question_id");a[t]={time:0}})),u={},e.each(i.catPoints,(function(e,t){u[e]=0})),T.quizStartPage.hide(),o.find(".wpProQuiz_loadQuiz").hide(),T.quiz.show(),O.show(),0!==s.timelimitcookie&&(w="ld_"+s.quizId+"_quiz_responses",r.methode.CookieInit()),"1"===s.quiz_resume_enabled&&(w="ld_save_"+s.quizId+"_quiz_responses",r.methode.CookieInit()),r.methode.setupMatrixSortHeights(),1==s.ld_script_debug&&console.log("currentQuestion.index [%o] currentQuestion[%o]",c.index(),c),3!=s.mode&&o.trigger({type:"changeQuestion",values:{item:c,index:c.index()}})},showSingleQuestion(e){const t=e?Math.ceil(e/s.qpp):1;3===s.mode&&"number"!=typeof q.lastQuestion?this.showSinglePage(t):this.singlePageNavigationQuizResume(e)},showSinglePage(e){if($listItem=T.questionList.children().hide(),!s.qpp)return void $listItem.show();e=e?+e:1;const t=Math.ceil(o.find(".wpProQuiz_list > li").length/s.qpp);if(e>t)return;const i=o.find(I).hide(),n=o.find(j).hide(),a=o.find('input[name="checkSingle"]').hide();e>1&&i.val(i.data("text").replace(/%d/,e-1)).show(),e==t?a.show():n.val(n.data("text").replace(/%d/,e+1)).show(),_=e;const u=s.qpp*(e-1);$listItem.slice(u,u+s.qpp).show(),void 0!==T.self&&(T.self.is(":hidden")&&T.self.show(),r.methode.scrollTo(T.self))},nextQuestion(){if(0===s.timelimitcookie&&"1"!==s.quiz_resume_enabled||(!0===c.find(x).data("question-lock")?r.methode.CookieProcessQuestionResponse(c,!0):r.methode.CookieProcessQuestionResponse(c)),"1"===s.quiz_resume_enabled){r.methode.saveMetaDataToCookie({lastQuestion:jQuery(c[0]).data("question-meta").question_pro_id});const e=jQuery(c.next()[0]);void 0!==e.data("question-meta")&&r.methode.saveMetaDataToCookie({nextQuestion:e.data("question-meta").question_pro_id})}jQuery(".mejs-pause").trigger("click"),this.showQuestionObject(c.next())},prevQuestion(){this.showQuestionObject(c.prev())},showQuestion(e){const t=T.listItems.eq(e);if(3==s.mode||h)return s.qpp&&r.methode.showSingleQuestion(e+1),r.methode.scrollTo(t,1),void M.startQuiz();this.showQuestionObject(t)},showQuestionObject(t){if(1==s.ld_script_debug&&console.log("showQuestionObject: obj[%o]",t),void 0!==c&&c.length>0&&T.questionList.children().each((function(){e(this).data("question-meta").question_pro_id!==c.data("question-meta").question_pro_id&&e(this).hide()})),!t.length&&P.forcingQuestionSolve&&P.quizSummeryHide&&P.reviewQustion){list=T.questionList.children(),null!=list&&list.each((function(){const t=e(this).find(b);t.data("question_id"),s.json[t.data("question_id")]}));for(let e=0,t=o.find(".wpProQuiz_listItem").length;e<t;e++)if(!l[e])return alert(WpProQuizGlobal.questionsNotSolved),!1}if(c.hide(),c=t.show(),r.methode.scrollTo(T.quiz),o.trigger({type:"changeQuestion",values:{item:c,index:c.index()}}),c.length){const e=c.find(b).data("question_id");M.questionStart(e)}else r.methode.showQuizSummary()},skipQuestion(){o.trigger({type:"skipQuestion",values:{item:c,index:c.index()}}),r.methode.nextQuestion()},reviewQuestion(){o.trigger({type:"reviewQuestion",values:{item:c,index:c.index()}})},uploadFile(t){const i=t.currentTarget.id.replace("uploadEssaySubmit_",""),n=e("#uploadEssay_"+i)[0].files[0];if(void 0!==n){const t=e("#_uploadEssay_nonce_"+i).val(),r=e("#uploadEssaySubmit_"+i),a=e("#uploadEssayMessage_"+i);a.removeClass("uploadEssayMessage_fail"),a.removeClass("uploadEssayMessage_success"),a.html(s.essayUploading);const u=new FormData;u.append("action","learndash_upload_essay"),u.append("nonce",t),u.append("question_id",i),u.append("course_id",s.course_id),u.append("essayUpload",n),e.ajax({method:"POST",type:"POST",url:WpProQuizGlobal.ajaxurl,data:u,cache:!1,contentType:!1,processData:!1,success(t){if(void 0!==t.data.message&&a.html(t.data.message),1==t.success&&void 0!==t.data.filelink){a.addClass("uploadEssayMessage_success"),e("#uploadEssayFile_"+i).val(t.data.filelink),r.attr("disabled","disabled");const s=e("#uploadEssayFile_"+i).parents(".wpProQuiz_listItem");o.trigger({type:"questionSolved",values:{item:s,index:s.index(),solved:!0}})}else a.addClass("uploadEssayMessage_fail"),r.removeAttr("disabled")}})}t.preventDefault()},showQuizSummary(){if(M.questionStop(),M.stopQuiz(),g=!0,P.quizSummeryHide||!P.reviewQustion)return void(P.formActivated&&s.formPos==A?(O.hide(),T.quiz.hide(),r.methode.scrollTo(o.find(".wpProQuiz_infopage").show())):r.methode.finishQuiz());const t=o.find(".wpProQuiz_checkPage");o.find(".wpProQuiz_checkPage .wpProQuiz_reviewSummary").append(o.find(".wpProQuiz_reviewDiv .wpProQuiz_reviewQuestion").clone()),o.find(".wpProQuiz_checkPage .wpProQuiz_reviewSummary").append(o.find(".wpProQuiz_reviewDiv .wpProQuiz_reviewLegend").clone()),o.find(".wpProQuiz_checkPage .wpProQuiz_reviewSummary .wpProQuiz_reviewQuestion li").removeClass("wpProQuiz_reviewQuestionTarget"),o.find(".wpProQuiz_checkPage .wpProQuiz_reviewSummary .wpProQuiz_reviewQuestion li").on("click",(function(i){o.find(".wpProQuiz_checkPage .wpProQuiz_reviewSummary").html(""),t.hide(),T.quiz.show(),O.show(!0);const s=e(this).index();r.methode.showQuestion(s)}));let i=0;for(let e=0,t=l.length;e<t;e++)l[e]&&i++;t.find("span:eq(0)").text(i),O.hide(),T.quiz.hide(),t.show(),r.methode.scrollTo(t)},finishQuiz(e){T.next.last().attr("disabled","disabled"),o.find('input[name="checkSingle"]').attr("disabled","disabled"),M.questionStop(),M.stopQuiz(),D.stop(),g=!0;let t=(+new Date-d)/1e3;t=s.timelimit&&t>s.timelimit?s.timelimit:t,m=t,o.find(".wpProQuiz_quiz_time span").text(r.methode.parseTime(t)),e&&T.results.find(".wpProQuiz_time_limit_expired").show(),r.methode.checkQuestion(T.questionList.children(),!0)},finishQuizEnd(){o.find(".wpProQuiz_correct_answer").text(a.comp.correctQuestions),s.globalPoints>0?a.comp.result=Math.round(a.comp.points/s.globalPoints*100*100)/100:a.comp.result=0;let t=!1;if(e.each(a,(function(){void 0!==this.graded_status&&"not_graded"==this.graded_status&&(t=!0)})),"undefined"!=typeof certificate_details&&null!=certificate_details.certificateLink&&""!=certificate_details.certificateLink){const e=o.find(".wpProQuiz_certificate");a.comp.result>=100*certificate_details.certificate_threshold?e.show():1==t&&"undefined"!=typeof certificate_pending&&(e.html(certificate_pending),e.show())}const n=o.find(".quiz_continue_link");let u=!1;jQuery(n).hasClass("show_quiz_continue_buttom_on_fail")&&(u=!0),void 0!==i.passingpercentage&&parseFloat(i.passingpercentage)>=0?a.comp.result>=i.passingpercentage||u?(o.addClass("ld-quiz-result-passed"),o.removeClass("ld-quiz-result-failed"),o.trigger({type:"learndash-quiz-finished",values:{status:"passed",item:o,results:a}}),o.trigger({type:"learndash-quiz-finished-passed",values:{status:"passed",item:o,results:a}}),"undefined"!=typeof continue_details&&(o.find(".quiz_continue_link").html(continue_details),o.find(".quiz_continue_link").show())):(o.removeClass("ld-quiz-result-passed"),o.addClass("ld-quiz-result-failed"),o.trigger({type:"learndash-quiz-finished",values:{status:"failed",item:o,results:a}}),o.trigger({type:"learndash-quiz-finished-failed",values:{status:"failed",item:o,results:a}}),o.find(".quiz_continue_link").hide()):"undefined"!=typeof continue_details&&(o.find(".quiz_continue_link").html(continue_details),o.find(".quiz_continue_link").show()),$pointFields=o.find(".wpProQuiz_points span"),$gradedPointsFields=o.find(".wpProQuiz_graded_points span"),$pointFields.eq(0).text(a.comp.points),$pointFields.eq(1).text(s.globalPoints),$pointFields.eq(2).text(a.comp.result+"%"),$gradedQuestionCount=0,$gradedQuestionPoints=0,e.each(a,(function(e,t){if(!isNaN(e)&&t.graded_id){const e=t.possiblePoints-t.points;e>0&&($gradedQuestionPoints+=e,$gradedQuestionCount++)}})),$gradedQuestionCount>0&&(e(".wpProQuiz_points").hide(),e(".wpProQuiz_graded_points").show(),$gradedPointsFields.eq(0).text(a.comp.points),$gradedPointsFields.eq(1).text(s.globalPoints),$gradedPointsFields.eq(2).text(a.comp.result+"%"),$gradedPointsFields.eq(3).text($gradedQuestionCount),$gradedPointsFields.eq(4).text($gradedQuestionPoints)),o.find(".wpProQuiz_resultsList > li").eq(r.methode.findResultIndex(a.comp.result)).show(),r.methode.setAverageResult(a.comp.result,!1),this.setCategoryOverview(),r.methode.sendCompletedQuiz(),P.isAddAutomatic&&L.isUser&&r.methode.addToplist(),O.hide(),o.find(".wpProQuiz_checkPage, .wpProQuiz_infopage").hide(),T.quiz.hide()},sending(e,t,i){T.sending.show();const o=T.sending.find(".sending_progress_bar");let s;if(s=void 0===typeof e||null==e?parseInt(100*o.width()/o.offsetParent().width())+156:e,null==t)t=80;null==i&&(i=1),null!=f&&void 0!==typeof f&&clearInterval(f),f=setInterval((function(){const e=parseInt(100*o.width()/o.offsetParent().width());e>=t&&(clearInterval(f),e>=100&&setTimeout(r.methode.showResults(),2e3)),o.css("width",s+"%"),s+=i}),300)},showResults(){T.sending.hide(),T.results.show(),r.methode.scrollTo(T.results)},setCategoryOverview(){a.comp.cats={},o.find(".wpProQuiz_catOverview li").each((function(){const t=e(this),i=t.data("category_id");if(void 0===s.catPoints[i])return t.hide(),!0;const o=Math.round(u[i]/s.catPoints[i]*100*100)/100;a.comp.cats[i]=o,t.find(".wpProQuiz_catPercent").text(o+"%"),t.show()}))},questionSolved(e){l[e.values.index]=e.values.solved},sendCompletedQuiz(){if(P.preview)return;var t;g=!0,t=a,o.find(".wpProQuiz_questionList").each((function(){const i=e(this),o=i.data("question_id"),s=i.data("type"),n={};if("single"==s||"multiple"==s)i.find(".wpProQuiz_questionListItem").each((function(){n[e(this).attr("data-pos")]=+e(this).find(".wpProQuiz_questionInput").is(":checked")}));else if("free_answer"==s)n[0]=i.find(".wpProQuiz_questionInput").val();else{if("sort_answer"==s)return!0;if("matrix_sort_answer"==s)return!0;if("cloze_answer"==s){let t=0;i.find(".wpProQuiz_cloze input").each((function(){n[t++]=e(this).val()}))}else if("assessment_answer"==s)n[0]="",i.find(".wpProQuiz_questionInput:checked").each((function(){n[e(this).data("index")]=e(this).val()}));else if("essay"==s)return}t[o].data=n}));const i=B.getFormData();var u=learndash_prepare_quiz_resume_data(s);if(1==s.ld_script_debug&&console.log("line: 1936 quiz_resume_data[%o]",u),!1===u&&(u={}),void 0!==s.quiz_resume_data){try{u=JSON.parse(s.quiz_resume_data)}catch(e){console.log("JSON.parse error [%o]",e);u={}}if(!jQuery.isEmptyObject(u))for(var d in u)if(d.startsWith("tip")){var c=u[d].question_id;a[c].tip=1}}if(void 0!==z&&""!==z)for(var d in z)if(d.startsWith("tip")){c=z[d].question_id;a[c].tip=1}jQuery.ajax({type:"POST",url:WpProQuizGlobal.ajaxurl,dataType:"json",cache:!1,data:{action:"wp_pro_quiz_completed_quiz",course_id:s.course_id,lesson_id:s.lesson_id,topic_id:s.topic_id,quiz:s.quiz,quizId:s.quizId,results:JSON.stringify(a),timespent:m,forms:i,quiz_nonce:s.quiz_nonce},success(e){if(null!=e&&void 0!==s.quizId){const t=parseInt(s.quizId);void 0!==e[t]&&void 0!==e[t].quiz_result_settings&&(n=e[t].quiz_result_settings,r.methode.afterSendUpdateIU(n))}r.methode.sending(null,100,15),r.methode.CookieDelete()}})},afterSendUpdateIU(e){void 0!==e.showAverageResult&&(e.showAverageResult||o.find(".wpProQuiz_resultTable").remove()),void 0!==e.showCategoryScore&&(e.showCategoryScore||o.find(".wpProQuiz_catOverview").remove()),void 0!==e.showRestartQuizButton&&(e.showRestartQuizButton||o.find('input[name="restartQuiz"]').remove()),void 0!==e.showResultPoints&&(e.showResultPoints||o.find(".wpProQuiz_points").remove()),void 0!==e.showResultQuizTime&&(e.showResultQuizTime||o.find(".wpProQuiz_quiz_time").remove()),void 0!==e.showViewQuestionButton&&(e.showViewQuestionButton||o.find('input[name="reShowQuestion"]').remove()),void 0!==e.showContinueButton&&(e.showContinueButton||o.find(".quiz_continue_link").remove())},findResultIndex(e){const t=s.resultsGrade;let i=-1,o=999999;for(let s=0;s<t.length;s++){const n=t[s];e>=n&&e-n<o&&(o=e-n,i=s)}return i},showQustionList(){h=!h,T.toplistShowInButton.hide(),T.quiz.toggle(),o.find(".wpProQuiz_QuestionButton").hide(),T.questionList.children().show(),O.toggle(),o.find(".wpProQuiz_question_page").hide()},random(t,i){i=i||!1;let o;t.each((function(){const t=e(this).data("type");let i;i=""!==t&&"sort_answer"!==t?e(this).children().get().sort((function(){return Math.round(Math.random())-.5})):e(this).children().get(),e(i).appendTo(i[0].parentNode),o=i})),"1"===s.quiz_resume_enabled&&void 0!==o&&"question"===i&&r.methode.saveRandomQuestions(o)},saveRandomQuestions(e){const t=[];jQuery(e).each((function(e,i){const o=jQuery(i).data("question-meta").question_pro_id;t.push(o)})),t.length>0&&r.methode.saveMetaDataToCookie({randomQuestions:!0,randomOrder:t})},sortCategories(){const t=e(".wpProQuiz_list").children().get().sort((function(t,i){const o=e(t).find(".wpProQuiz_questionList").data("question_id"),n=e(i).find(".wpProQuiz_questionList").data("question_id");return s.json[o].catId-s.json[n].catId}));e(t).appendTo(t[0].parentNode)},restartQuiz(){T.results.hide(),T.questionList.children().hide(),T.toplistShowInButton.hide(),O.hide(),o.find(".wpProQuiz_questionInput, .wpProQuiz_cloze input").removeAttr("disabled").removeAttr("checked").css("background-color",""),o.find('.wpProQuiz_questionListItem input[type="text"]').val(""),o.find(".wpProQuiz_answerCorrect, .wpProQuiz_answerIncorrect").removeClass("wpProQuiz_answerCorrect wpProQuiz_answerIncorrect"),o.find(".wpProQuiz_listItem").data("check",!1),o.find("textarea.wpProQuiz_questionEssay").val(""),o.find("input.uploadEssayFile").val(""),o.find("input.wpProQuiz_upload_essay").val(""),o.find(".wpProQuiz_response").hide().children().hide(),r.methode.resetMatrix(o.find(".wpProQuiz_listItem")),o.find(".wpProQuiz_sortStringItem, .wpProQuiz_sortable").removeAttr("style"),o.find(".wpProQuiz_clozeCorrect, .wpProQuiz_QuestionButton, .wpProQuiz_resultsList > li").hide(),o.find('.wpProQuiz_question_page, input[name="tip"]').show(),o.find(".wpProQuiz_certificate").attr("style","display: none !important"),T.results.find(".wpProQuiz_time_limit_expired").hide(),T.next.last().val(p),h=!1,window.location.reload(!0)},showSpinner(){o.find(".wpProQuiz_spinner").show()},hideSpinner(){o.find(".wpProQuiz_spinner").hide()},checkQuestion(t,i){const n=null!=t,d={};(t=null==t?c:t).each((function(){const t=e(this),i=t.index(),o=t.find(b),n=o.data("question_id"),a=s.json[o.data("question_id")];let u=a.type;if(M.questionStop(),t.data("check"))return!0;"single"!=a.type&&"multiple"!=a.type||(u="singleMulti"),d[n]=R(u,0,t,o,!0),d[n].question_pro_id=a.id,d[n].question_post_id=a.question_post_id,0===s.timelimitcookie&&"1"!==s.quiz_resume_enabled||r.methode.CookieSaveResponse(n,i,a.type,d[n],!0)})),s.checkAnswers={list:t,responses:d,endCheck:i,finishQuiz:n},n?r.methode.sending(1,80,3):r.methode.showSpinner(),r.methode.ajax({action:"ld_adv_quiz_pro_ajax",func:"checkAnswers",data:{quizId:s.quizId,quiz:s.quiz,course_id:s.course_id,quiz_nonce:s.quiz_nonce,responses:JSON.stringify(d)}},(function(t){r.methode.hideSpinner();const i=s.checkAnswers.list,n=(s.checkAnswers.responses,s.checkAnswers.r,s.checkAnswers.endCheck,s.checkAnswers.finishQuiz);i.each((function(){const i=e(this),n=i.find(b),d=n.data("question_id");if(i.data("check"))return!0;if(void 0!==t[d]){const e=t[d];data=s.json[n.data("question_id")],i.find(".wpProQuiz_response").show(),i.find(k).hide(),i.find(C).hide(),i.find(x).show(),i.find(x).attr("data-question-lock",!0),a[data.id].points=e.p,void 0!==e.p_nonce?a[data.id].p_nonce=e.p_nonce:a[data.id].p_nonce="",a[data.id].correct=Number(e.c),a[data.id].data=e.s,void 0!==e.a_nonce?a[data.id].a_nonce=e.a_nonce:a[data.id].a_nonce="",a[data.id].possiblePoints=e.e.possiblePoints,jQuery.isEmptyObject(a[data.id].data)&&(null==e.e.type||"sort_answer"!=e.e.type&&"matrix_sort_answer"!=e.e.type||(a[data.id].data=e.e.r)),void 0!==e.e.graded_id&&e.e.graded_id>0&&(a[data.id].graded_id=e.e.graded_id),void 0!==e.e.graded_status&&(a[data.id].graded_status=e.e.graded_status),a.comp.points=parseFloat(parseFloat(a.comp.points+e.p).toFixed(2)),i.find(".wpProQuiz_response").show(),i.find(k).hide(),i.find(C).hide(),i.find(x).show(),i.find(x).attr("data-question-lock",!0),jQuery.isEmptyObject(a[data.id].data)&&void 0!==e.e.type&&("sort_answer"!=e.e.type&&"matrix_sort_answer"!=e.e.type||void 0!==e.e.r&&(a[data.id].data=e.e.r),"essay"==e.e.type&&void 0!==e.e.graded_id&&(a[data.id].data={graded_id:e.e.graded_id})),u[data.catId]+=e.p,"1"===s.quiz_resume_enabled&&r.methode.saveMetaDataToCookie("checked"+d,e),r.methode.markCorrectIncorrect(e,i,n),e.c?(void 0!==e.e.AnswerMessage&&(i.find(".wpProQuiz_correct").find(".wpProQuiz_AnswerMessage").html(e.e.AnswerMessage),i.find(".wpProQuiz_correct").trigger("learndash-quiz-answer-response-contentchanged")),o.trigger({type:"questionSolvedCorrect",values:{item:i,index:i.index(),solved:!0,result:e}}),i.find(".wpProQuiz_correct").show(),a.comp.correctQuestions+=1):(void 0!==e.e.AnswerMessage&&(i.find(".wpProQuiz_incorrect").find(".wpProQuiz_AnswerMessage").html(e.e.AnswerMessage),i.find(".wpProQuiz_incorrect").trigger("learndash-quiz-answer-response-contentchanged")),o.trigger({type:"questionSolvedIncorrect",values:{item:i,index:i.index(),solved:!0,result:e}}),i.find(".wpProQuiz_incorrect").show()),i.find(".wpProQuiz_responsePoints").text(e.p),i.data("check",!0)}})),n&&r.methode.finishQuizEnd()}))},markCorrectIncorrect(t,i,o){if(void 0!==t.e.c)switch(t.e.type){case"single":case"multiple":o.children().each((function(i){const o=e(this),s=o.attr("data-pos");if(t.e.c[s]){e("input.wpProQuiz_questionInput",o).is(":checked")?r.methode.marker(o,!0):r.methode.marker(o,"wpProQuiz_answerCorrectIncomplete")}else!t.c&&t.e.r[s]&&r.methode.marker(o,!1)}));break;case"free_answer":var s=o.children();t.c?r.methode.marker(s,!0):r.methode.marker(s,!1),void 0!==t.e.c&&void 0!==t.e.c&&t.e.c.length>0&&i.find("span.wpProQuiz_freeCorrect").text(t.e.c.join(", ")).show();break;case"cloze_answer":o.find(".wpProQuiz_cloze").each((function(i,o){const s=e(this).children(),n=s.eq(0),a=s.eq(1);r.methode.cleanupCurlyQuotes(n.val());t.s[i]?n.addClass("wpProQuiz_answerCorrect"):(n.addClass("wpProQuiz_answerIncorrect"),void 0!==t.e.c[i]&&(a.html("("+t.e.c[i].join()+")"),a.show())),n.attr("disabled","disabled")}));break;case"sort_answer":var n=jQuery("div.wpProQuiz_questionList_containers",i);if(void 0!==n&&n.length){o.hasClass("ld-sortable--sort_answer")&&learndash.forms.sortable.destroySortable(o[0]??null);const i=o.clone();i.insertAfter(o),i.addClass("wpProQuiz_questionList_correct");var a=i.children(".wpProQuiz_questionListItem"),u=new Array;jQuery.each(t.e.c,(function(e,t){u[t]=e})),a.sort((function(t,i){return u[e(t).attr("data-pos")]>u[e(i).attr("data-pos")]?1:-1})),i.append(a),i.children(".wpProQuiz_questionListItem").addClass("wpProQuiz_answerCorrect"),jQuery.each(t.e.c,(function(e,t){const i=o.children(".wpProQuiz_questionListItem")[e];void 0!==i&&""!==i&&(t==jQuery(i).data("pos")?r.methode.marker(jQuery(i),!0):r.methode.marker(jQuery(i),!1))})),jQuery(n).find(".wpProQuiz_questionList_container_student").append(o),jQuery(n).find(".wpProQuiz_questionList_container_correct").append(i),jQuery(n).find(".wpProQuiz_questionList_container_student").show(),jQuery(n).find(".wpProQuiz_questionList_container_correct").hide(),jQuery(n).find("input.wpProQuiz_questionList_containers_view_student").on("click",(function(e){jQuery(n).find("input.wpProQuiz_questionList_containers_view_student").addClass("wpProQuiz_questionList_containers_view_active"),jQuery(n).find("input.wpProQuiz_questionList_containers_view_correct").removeClass("wpProQuiz_questionList_containers_view_active"),jQuery(n).find(".wpProQuiz_questionList_container_correct").hide(),jQuery(n).find(".wpProQuiz_questionList_container_student").show(),e.preventDefault()})),jQuery(n).find("input.wpProQuiz_questionList_containers_view_correct").on("click",(function(e){jQuery(n).find("input.wpProQuiz_questionList_containers_view_student").removeClass("wpProQuiz_questionList_containers_view_active"),jQuery(n).find("input.wpProQuiz_questionList_containers_view_correct").addClass("wpProQuiz_questionList_containers_view_active"),jQuery(n).find(".wpProQuiz_questionList_container_student").hide(),jQuery(n).find(".wpProQuiz_questionList_container_correct").show(),e.preventDefault()})),jQuery(n).show()}else{(a=o.children(".wpProQuiz_questionListItem")).each((function(i,o){const s=e(this);t.e.c[i]==s.attr("data-pos")?r.methode.marker(s,!0):r.methode.marker(s,!1)})),a.children().css({"box-shadow":"0 0",cursor:"auto"});u=new Array;jQuery.each(t.e.c,(function(e,t){u[t]=e})),a.sort((function(t,i){return u[e(t).attr("data-pos")]>u[e(i).attr("data-pos")]?1:-1})),o.append(a)}break;case"matrix_sort_answer":a=o.children();var d=new Array;statistcAnswerData={0:-1},a.each((function(){const i=e(this),o=(i.attr("data-pos"),i.find(".wpProQuiz_maxtrixSortCriterion")),s=o.children(),n=s.attr("data-pos");s.length&&t.e.c[n]==i.attr("data-pos")?r.methode.marker(i,!0):r.methode.marker(i,!1),d[n]=o})),r.methode.resetMatrix(i),i.find(".wpProQuiz_sortStringItem").each((function(){const t=d[e(this).attr("data-pos")];null!=t&&t.append(this)})).css({"box-shadow":"0 0",cursor:"auto"}),i.find(".wpProQuiz_sortStringList, .wpProQuiz_maxtrixSortCriterion").sortable(),i.find(".wpProQuiz_sortStringList, .wpProQuiz_maxtrixSortCriterion").sortable("destroy")}},setCheckedStatusFromData(e,t,i){1==s.ld_script_debug&&(console.log("setCheckedStatusFromData data[%o]",e),console.log("setCheckedStatusFromData question[%o]",t),console.log("setCheckedStatusFromData list[%o]",i));jQuery([q,z]).each((function(o,s){if(s.hasOwnProperty("checked"+e.id))for(const o in s)if(o.startsWith("checked")){o.replace("checked","")==e.id&&(questionResult=s[o],r.methode.markCorrectIncorrect(questionResult,t,i),questionResult.c?(void 0!==questionResult.e.AnswerMessage&&(t.find(".wpProQuiz_correct").find(".wpProQuiz_AnswerMessage").html(learndash_decodeHTML(questionResult.e.AnswerMessage)),t.find(".wpProQuiz_correct").trigger("learndash-quiz-answer-response-contentchanged")),t.find(".wpProQuiz_response").show(),t.find(".wpProQuiz_correct").show()):(void 0!==questionResult.e.AnswerMessage&&(t.find(".wpProQuiz_incorrect").find(".wpProQuiz_AnswerMessage").html(learndash_decodeHTML(questionResult.e.AnswerMessage)),t.find(".wpProQuiz_incorrect").trigger("learndash-quiz-answer-response-contentchanged")),t.find(".wpProQuiz_response").show(),t.find(".wpProQuiz_incorrect").show()))}}))},showTip(){const t=e(this),i=t.siblings(".wpProQuiz_question").find(b).data("question_id");t.siblings(".wpProQuiz_tipp").toggle("fast"),a[i].tip=1,"1"===s.quiz_resume_enabled&&r.methode.saveMetaDataToCookie("tip"+i,{question_id:i}),e(document).on("mouseup.tipEvent",(function(t){const i=o.find(".wpProQuiz_tipp"),s=o.find('input[name="tip"]');i.is(t.target)||0!=i.has(t.target).length||s.is(t.target)||(i.hide("fast"),e(document).unbind(".tipEvent"))}))},ajax(t,i,o){o=o||"json",P.cors&&(jQuery.support.cors=!0),void 0===t.quiz&&(t.quiz=s.quiz),void 0===t.course_id&&(t.course_id=s.course_id),void 0===t.quiz_nonce&&(t.quiz_nonce=s.quiz_nonce),e.ajax({method:"POST",type:"POST",url:WpProQuizGlobal.ajaxurl,data:t,success:i,dataType:o}),P.cors&&(jQuery.support.cors=!1)},checkQuizLock(){y.loadLock=1,r.methode.ajax({action:"wp_pro_quiz_check_lock",quizId:s.quizId},(function(e){null!=e.lock&&(y.isLocked=e.lock.is),null!=e.prerequisite&&(y.isPrerequisite=1,o.find(".wpProQuiz_prerequisite span").text(e.prerequisite)),null!=e.startUserLock&&(y.isUserStartLocked=e.startUserLock),y.loadLock=0,y.isQuizStart&&r.methode.startQuiz()}))},loadQuizData(){r.methode.ajax({action:"wp_pro_quiz_load_quiz_data",quizId:s.quizId,quiz_nonce:s.quiz_nonce},(function(e){e.toplist&&r.methode.handleToplistData(e.toplist),null!=e.averageResult&&r.methode.setAverageResult(e.averageResult,!0)}))},setAverageResult(e,t){const i=o.find(".wpProQuiz_resultValue:eq("+(t?0:1)+") > * ");i.eq(1).text(e+"%"),i.eq(0).css("width",240*e/100+"px")},handleToplistData(e){const t=o.find(".wpProQuiz_addToplist"),i=t.find(".wpProQuiz_addBox").show().children("div");if(e.canAdd)if(t.show(),t.find(".wpProQuiz_addToplistMessage").hide(),t.find(".wpProQuiz_toplistButton").show(),L.token=e.token,L.isUser=0,e.userId)i.hide(),L.isUser=1,P.isAddAutomatic&&t.hide();else{i.show();const t=i.children().eq(1);e.captcha?(t.find('input[name="wpProQuiz_captchaPrefix"]').val(e.captcha.code),t.find(".wpProQuiz_captchaImg").attr("src",e.captcha.img),t.find('input[name="wpProQuiz_captcha"]').val(""),t.show()):t.hide()}else t.hide()},scrollTo(t,i){const o=t.offset().top-100;(i||(window.pageYOffset||document.body.scrollTop)>o)&&e("html,body").clearQueue().animate({scrollTop:o},300)},addToplist(){if(P.preview)return;const e=o.find(".wpProQuiz_addToplistMessage").text(WpProQuizGlobal.loadData).show(),t=o.find(".wpProQuiz_addBox").hide();r.methode.ajax({action:"wp_pro_quiz_add_toplist",quizId:s.quizId,quiz:s.quiz,quiz_nonce:s.quiz_nonce,token:L.token,name:t.find('input[name="wpProQuiz_toplistName"]').val(),email:t.find('input[name="wpProQuiz_toplistEmail"]').val(),captcha:t.find('input[name="wpProQuiz_captcha"]').val(),prefix:t.find('input[name="wpProQuiz_captchaPrefix"]').val(),results:JSON.stringify(a),timespent:m},(function(i){e.text(i.text),i.clear?(t.hide(),r.methode.updateToplist()):t.show(),i.captcha&&(t.find(".wpProQuiz_captchaImg").attr("src",i.captcha.img),t.find('input[name="wpProQuiz_captchaPrefix"]').val(i.captcha.code),t.find('input[name="wpProQuiz_captcha"]').val(""))}))},updateToplist(){"function"==typeof wpProQuiz_fetchToplist&&wpProQuiz_fetchToplist()},registerSolved(){o.find('.wpProQuiz_questionInput[type="text"]').on("change",(function(t){const i=e(this),s=i.parents(".wpProQuiz_listItem");let n=!1;""!=i.val()&&(n=!0),o.trigger({type:"questionSolved",values:{item:s,index:s.index(),solved:n}})})),o.find('.wpProQuiz_questionList[data-type="single"] .wpProQuiz_questionInput, .wpProQuiz_questionList[data-type="assessment_answer"] .wpProQuiz_questionInput').on("change",(function(t){const i=e(this).parents(".wpProQuiz_listItem"),s=this.checked;o.trigger({type:"questionSolved",values:{item:i,index:i.index(),solved:s}})})),o.find(".wpProQuiz_cloze input").on("change",(function(){const t=e(this).parents(".wpProQuiz_listItem");let i=!0;t.find(".wpProQuiz_cloze input").each((function(){if(""==e(this).val())return i=!1,!1})),o.trigger({type:"questionSolved",values:{item:t,index:t.index(),solved:i}})})),o.find('.wpProQuiz_questionList[data-type="multiple"] .wpProQuiz_questionInput').on("change",(function(t){const i=e(this).parents(".wpProQuiz_listItem");let s=0;i.find('.wpProQuiz_questionList[data-type="multiple"] .wpProQuiz_questionInput').each((function(e){this.checked&&s++})),o.trigger({type:"questionSolved",values:{item:i,index:i.index(),solved:!!s}})})),o.find('.wpProQuiz_questionList[data-type="essay"] textarea.wpProQuiz_questionEssay').on("change",(function(t){const i=e(this),s=i.parents(".wpProQuiz_listItem");let n=!1;""!=i.val()&&(n=!0),o.trigger({type:"questionSolved",values:{item:s,index:s.index(),solved:n}})}))},loadQuizDataAjax(t){r.methode.ajax({action:"wp_pro_quiz_admin_ajax_load_data",func:"quizLoadData",data:{quizId:s.quizId,quiz:s.quiz,quiz_nonce:s.quiz_nonce}},(function(i){s.globalPoints=i.globalPoints,s.catPoints=i.catPoints,s.json=i.json,T.quiz.remove(),o.find(".wpProQuiz_quizAnker").after(i.content),e("table.wpProQuiz_toplistTable caption span.wpProQuiz_max_points").html(s.globalPoints),T={back:o.find('input[name="back"]'),next:o.find(x),quiz:o.find(".wpProQuiz_quiz"),questionList:o.find(".wpProQuiz_list"),results:o.find(".wpProQuiz_results"),sending:o.find(".wpProQuiz_sending"),quizStartPage:o.find(".wpProQuiz_text"),timelimit:o.find(".wpProQuiz_time_limit"),toplistShowInButton:o.find(".wpProQuiz_toplistShowInButton"),listItems:e()},r.methode.initQuiz(),t&&r.methode.startQuiz(!0);const n=i.content,a=n.search("wp-audio-shortcode"),u=n.search("wp-video-shortcode");"-1"==a&&"-1"==u||(e.getScript(i.site_url+"/wp-includes/js/mediaelement/mediaelement-and-player.min.js"),e.getScript(i.site_url+"/wp-includes/js/mediaelement/wp-mediaelement.js"),e("<link/>",{rel:"stylesheet",type:"text/css",href:i.site_url+"/wp-includes/js/mediaelement/mediaelementplayer.min.css"}).appendTo("head"))}))},nextQuestionClicked(){const e=c.find(b);s.json[e.data("question_id")];if(P.forcingQuestionSolve&&!l[c.index()]&&(P.quizSummeryHide||!P.reviewQustion))return alert(WpProQuizGlobal.questionNotSolved),!1;r.methode.nextQuestion()},initQuiz(){r.methode.registerSolved(),T.next.on("click",r.methode.nextQuestionClicked),T.back.on("click",(function(e){r.methode.prevQuestion()})),o.find(k).on("click",(function(){if(P.forcingQuestionSolve&&!l[c.index()])return alert(WpProQuizGlobal.questionNotSolved),!1;r.methode.checkQuestion()})),o.find('input[name="checkSingle"]').on("click",(function(){const t=T.questionList.children();if(null!=t&&t.each((function(){const t=e(this).find(b);t.data("question_id"),s.json[t.data("question_id")]})),P.forcingQuestionSolve&&(P.quizSummeryHide||!P.reviewQustion))for(let e=0,t=o.find(".wpProQuiz_listItem").length;e<t;e++)if(!l[e])return alert(WpProQuizGlobal.questionsNotSolved),!1;r.methode.showQuizSummary()})),o.find('input[name="tip"]').on("click",r.methode.showTip),o.find('input[name="skip"]').on("click",r.methode.skipQuestion),o.find('input[name="wpProQuiz_pageLeft"]').on("click",(function(){r.methode.showSinglePage(_-1),r.methode.setupMatrixSortHeights()})),o.find('input[name="wpProQuiz_pageRight"]').on("click",(function(){r.methode.showSinglePage(_+1),r.methode.setupMatrixSortHeights()})),o.find('input[id^="uploadEssaySubmit"]').on("click",r.methode.uploadFile),o.trigger("learndash-quiz-init")},CookieInit(){if(1==s.ld_script_debug&&console.log("in CookieInit"),z=jQuery.cookie(w),z&&null!=z&&"%7B%7D"!==z)try{z=JSON.parse(z)}catch(e){console.log("JSON.parse error [%o]",e),z={}}else z={};1==s.ld_script_debug&&console.log("after parse: cookie_value[%o]",z),P.formActivated&&s.formPos===E&&B.checkForm()&&B.saveFormDataToCookie(),r.methode.CookieSetResponses(),r.methode.CookieResponseTimer()},CookieDelete(){jQuery.cookie(w,"")},CookieProcessQuestionResponse(t,i){i=i||!1;null!=t&&t.each((function(){const t=e(this),o=t.index(),n=t.find(b),a=n.data("question_id"),u=s.json[n.data("question_id")];let d=u.type;"single"!=u.type&&"multiple"!=u.type||(d="singleMulti");const c=R(d,0,t,n,!1);r.methode.saveMetaDataToCookie({lastQuestion:a}),r.methode.CookieSaveResponse(a,o,u.type,c,i)}))},CookieSaveResponse(e,t,i,o,n){n=n||!1;z[e]=e==="formData"+t?{index:t,value:o,type:i}:{index:t,value:o.response,type:i,lockQuestion:n},r.methode.calculateCookieExpiry(),jQuery.cookie(w,JSON.stringify(z),{expires:v}),"1"===s.quiz_resume_enabled&&r.methode.startCookieSendTimer()},calculateCookieExpiry(){v=new Date,s.timelimitcookie&&!s.quiz_resume_cookie_expiration&&v.setTime(v.getTime()+1e3*s.timelimitcookie),s.quiz_resume_cookie_expiration&&!s.timelimitcookie&&v.setTime(v.getTime()+1e3*s.quiz_resume_cookie_expiration)},saveMetaDataToCookie(e,t){t=t||!1;if(r.methode.calculateCookieExpiry(),z&&null!=z||(z={}),"string"==typeof e&&"object"==typeof t)for(var i in z[e]={},t){const o={[i]:t[i]};Object.assign(z[e],o)}else if("string"!=typeof e||t){if("object"==typeof e)for(var i in e)z[i]=e[i]}else z[e]=!0;jQuery.cookie(w,JSON.stringify(z),{expires:v}),"1"!==s.quiz_resume_enabled||Q||r.methode.startCookieSendTimer()},CookieResponseTimer(){o.on("questionSolved",(function(e){0===s.timelimitcookie&&"1"!==s.quiz_resume_enabled||r.methode.CookieProcessQuestionResponse(e.values.item)}))},CookieSetResponses(){if(1==s.ld_script_debug&&console.log("In CookieSetResponses"),!(null!=z&&Object.keys(z).length||s.quiz_resume_id))return;T.questionList.children().each((function(){const t=e(this),i=t.find(b),o=i.data("question_id");if(null!=q[o]){const e=q[o];(n=s.json[i.data("question_id")]).type===e.type&&F(n,e.value,t,i,e.lockQuestion)}if(null!=z[o]){const e=z[o];var n;(n=s.json[i.data("question_id")]).type===e.type&&F(n,e.value,t,i,e.lockQuestion)}void 0!==q&&void 0!==z&&(1==s.ld_script_debug&&(console.log("CookieSet: cookie_value['nextQuestion'][%o]",z.nextQuestion),console.log("CookieSet: quiz_resume_data[%o]",q)),void 0!==z.nextQuestion&&z.nextQuestion?r.methode.moveToNextUnansweredQuestion(z):r.methode.moveToNextUnansweredQuestion(q))}))},startCookieSendTimer(){Q||(Q=!0,void 0!==q&&0!==q.length||r.methode.prepareSendCookieData(),setInterval((function(){g||r.methode.prepareSendCookieData()}),1e3*s.quiz_resume_cookie_send_timer))},prepareSendCookieData(){s.timelimit&&r.methode.addTimelimitCookieData();if(r.methode.getObjectLength(z)>0){const e=r.methode.getObjectKeys(z);g=!0,r.methode.sendCookieData(e)}},getObjectLength:e=>Object.keys(e).length,getObjectKeys:e=>Object.keys(e),excludeKeysFromCount(e,t){const i=r.methode.getObjectKeys(e);let o=0;return i.forEach((function(e){e.startsWith(t)||o++})),o},addTimelimitCookieData(){const e=jQuery.cookie(D.timer_cookie);void 0!==e&&r.methode.saveMetaDataToCookie({[D.timer_cookie]:JSON.parse(e)})},moveToNextUnansweredQuestion(t){if(1==s.ld_script_debug&&console.log("moveToNextUnansweredQuestion: data[%o]",t),void 0!==t){let i="number"==typeof t.nextQuestion?t.nextQuestion:0;const o="number"==typeof t.lastQuestion?t.lastQuestion:0;1==s.ld_script_debug&&(console.log("moveToNextUnansweredQuestion: nextQuestion[%o]",i),console.log("moveToNextUnansweredQuestion: lastQuestion[%o]",o),console.log("moveToNextUnansweredQuestion: config.mode[%o]",s.mode)),3===s.mode?s.qpp?jQuery(T.listItems).each((function(t,i){e(i).data("question-meta").question_pro_id===o&&r.methode.singlePageNavigationQuizResume(t)})):(jQuery(T.questionList).children().show(),jQuery(T.listItems).each((function(t,i){e(i).data("question-meta").question_pro_id===o&&r.methode.scrollTo(T.listItems.eq(t),1)}))):((1==s.mode&&i>0||0==i&&o>0)&&(i=o),jQuery(T.listItems).each((function(t,o){if(e(o).data("question-meta").question_pro_id===i){1==s.ld_script_debug&&console.log("moveToNextUnansweredQuestion: match: listItem[%o]",o),c=T.listItems.eq(t);const e=c.find(b).data("question_id");return M.questionStart(e),r.methode.showQuestionObject(c),!1}})))}},singlePageNavigationQuizResume(e){const t=s.qpp>=1?e:e+1,i=Math.ceil(o.find(".wpProQuiz_list > li").length/s.qpp),n=Math.ceil(t/s.qpp);if(n<=i){const t=T.questionList.children().hide(),a=o.find(I).hide(),u=o.find(j).hide(),d=o.find('input[name="checkSingle"]').hide();n>1&&a.val(a.data("text").replace(/%d/,n-1)).show(),n===i?d.show():u.val(u.data("text").replace(/%d/,n+1)).show(),_=n;const c=s.qpp*(n-1);t.slice(c,c+s.qpp).show(),T.listItems.length===e&&(e-=1),r.methode.scrollTo(T.listItems.eq(e),0)}},sendCookieData(e){jQuery.ajax({type:"POST",url:WpProQuizGlobal.ajaxurl,dataType:"json",cache:!1,data:{action:"wp_pro_quiz_cookie_save_quiz",course_id:s.course_id,quiz:s.quiz,quizId:s.quizId,quiz_started:M.getQuizStart(),results:JSON.stringify(z),quiz_nonce:s.quiz_nonce},success(t){t.success&&(r.methode.compareObjectKeys(t.data,z)&&r.methode.deleteCookieKeys(e),g=!1)},error(e){console.log("xhr[%o]",e);const t=JSON.parse(e.responseText);console.log(t.data.message),g=!1}})},compareObjectKeys(e,t){const i=Object.keys(e).sort(),o=Object.keys(t).sort();return JSON.stringify(i)===JSON.stringify(o)},deleteCookieKeys(e){e.forEach((function(e){delete z[e]})),jQuery.cookie(w,JSON.stringify(z),{expires:v})},setupMatrixSortHeights(){e("li.wpProQuiz_listItem",T.questionList).each((function(t,i){if("matrix_sort_answer"===e(i).data("type")){let t=0;e("ul.wpProQuiz_sortStringList li",i).each((function(i,o){const s=e(o).outerHeight();s>t&&(t=s)})),t>0&&e("ul.wpProQuiz_sortStringList",i).css("min-height",t),e("ul.wpProQuiz_maxtrixSortCriterion",i).each((function(t,i){const o=e(i).parent("td");if(void 0!==o){const t=e(o).height();t&&(e(i).css("height",t),e(i).css("min-height",t))}}))}}))}},r.preInit=function(){r.methode.parseBitOptions(),O.init(),o.find('input[name="startQuiz"]').on("click",(function(){return r.methode.startQuiz(),!1})),P.checkBeforeStart&&!P.preview&&r.methode.checkQuizLock(),o.find('input[name="reShowQuestion"]').on("click",(function(){r.methode.showQustionList()})),o.find('input[name="restartQuiz"]').on("click",(function(){r.methode.restartQuiz()})),o.find('input[name="review"]').on("click",r.methode.reviewQuestion),o.find('input[name="wpProQuiz_toplistAdd"]').on("click",r.methode.addToplist),o.find('input[name="quizSummary"]').on("click",r.methode.showQuizSummary),o.find('input[name="endQuizSummary"]').on("click",(function(){if(P.forcingQuestionSolve){list=T.questionList.children(),null!=list&&list.each((function(){const t=e(this).find(b);t.data("question_id"),s.json[t.data("question_id")]}));for(let e=0,t=o.find(".wpProQuiz_listItem").length;e<t;e++)if(!l[e])return alert(WpProQuizGlobal.questionsNotSolved),!1}P.formActivated&&s.formPos==A&&!B.checkForm()||r.methode.finishQuiz()})),o.find('input[name="endInfopage"]').on("click",(function(){B.checkForm()&&r.methode.finishQuiz()})),o.find('input[name="showToplist"]').on("click",(function(){T.quiz.hide(),T.toplistShowInButton.toggle()})),o.on("questionSolved",r.methode.questionSolved),P.maxShowQuestion||r.methode.initQuiz(),P.autoStart&&r.methode.startQuiz(),P.formActivated&&s.formPos===E&&B.setFormDataFromServer()},r.preInit()},e.fn.wpProQuizFront=function(t){return this.each((function(){null==e(this).data("wpProQuizFront")&&e(this).data("wpProQuizFront",new e.wpProQuizFront(this,t))}))}}(jQuery);var learndash_prepare_quiz_resume_data=function(e){if("undefined"===e.quiz_resume_enabled)return!1;if("1"!==e.quiz_resume_enabled)return!1;if("undefined"===e.quiz_resume_data)return!1;let t={};1==e.ld_script_debug&&console.log("config.quiz_resume_data (raw)[%o]",e.quiz_resume_data);try{t=JSON.parse(e.quiz_resume_data),1==e.ld_script_debug&&console.log("resume_data (parsed)[%o]",t)}catch(e){console.log("JSON.parse error [%o]",e)}return t},learndash_decodeHTML=function(e){if((e=e||"").length>0&&"string"==typeof e){const t=document.createElement("textarea");t.innerHTML=e,e=t.value}return e};