jQuery((function(e){var r,t,a,n,o={},l={type:null,id:null,courseStatus:null,search:null,groups:"",courses:"",users:"",time_start:"",time_end:"",dateStart:"",dateEnd:"",reporting_pager:{},activity_pager:{}},i=[];function p(r,a,n){if(function(e){if(void 0!==ld_propanel_settings.is_dashboard&&"1"==ld_propanel_settings.is_dashboard){if(e.parents(".postbox").find(".loading").length)return;void 0!==(r=e.parents(".postbox").find("h2.hndle"))&&r.append('<img src="'+ld_propanel_settings.spinner_admin_img+'" class="loading">')}else if(jQuery("body").hasClass(".ld-propanel-full-page")){var r;if(e.prev("h2").find(".loading").length)return;void 0!==(r=e.prev("h2"))&&r.append('<img src="'+ld_propanel_settings.spinner_admin_img+'" class="loading">')}else e.prepend('<img src="'+ld_propanel_settings.spinner_admin_img+'" class="loading">')}(r),void 0===n&&(n={}),("activity"==a||"activity_rows"==a)&&jQuery("#dashboard-widgets").length){var o=jQuery("select#ld-propanel-pagesize").val();void 0!==o&&(n.per_page=o)}const i=Object.assign({},l,n.filters||{});e.when(e.ajax({url:ld_propanel_settings.ajaxurl,method:"get",dataType:"json",data:{action:"learndash_propanel_template",template:a,filters:i,container_type:t,args:n,nonce:ld_propanel_settings.nonce,lang:ld_propanel_settings.lang}})).done((function(t){!function(e){setTimeout((function(){void 0!==ld_propanel_settings.is_dashboard&&"1"==ld_propanel_settings.is_dashboard?e.parents(".postbox").find(".loading").remove():jQuery("body").hasClass(".ld-propanel-full-page")?e.prev("h2").find(".loading").remove():e.find(".loading").remove()}),500)}(r),t.hasOwnProperty("success")&&(void 0!==t.data.output.rows_html?r.html(t.data.output.rows_html):void 0!==t.data.output&&r.html(t.data.output),e(document).trigger("proPanel.templateLoaded",[a]),e(window).trigger("resize"))}))}function d(){if(void 0!==o.reporting){r=o.reporting.find(".tablesorter"),jQuery("select#ld-propanel-pagesize").val(),jQuery("select#ld-propanel-pagesize").val();const a=o.reporting.data("filters")||{};let n=Object.assign({},l,a.filters||{});n=Object.assign({type:"course"},n),"group"===n.type?n.groups=n.id:"course"===n.type?n.courses=n.id:n.users=n.id,e.when(e.ajax({url:ld_propanel_settings.ajaxurl,method:"get",dataType:"json",data:{action:"learndash_propanel_reporting_get_result_rows",nonce:ld_propanel_settings.nonce,filters:n,container_type:t,lang:ld_propanel_settings.lang}})).done((function(t){void 0!==t.rows_html&&(r.find("tbody").html(t.rows_html),void 0===o.filtering&&(r.find("thead th.ld-propanel-reporting-col-checkbox").hide(),r.find("tbody td.ld-propanel-reporting-col-checkbox").hide())),e(window).trigger("resize"),void 0!==t.pager?(l.reporting_pager=t.pager,e(".ld-propanel-widget-reporting .pager .ld-propanel-reporting-pager-info").show(),e(".ld-propanel-widget-reporting .pager .ld-propanel-reporting-pager-info span.pagedisplay span.current_page").html(t.pager.current_page),e(".ld-propanel-widget-reporting .pager .ld-propanel-reporting-pager-info span.pagedisplay span.total_pages").html(t.pager.total_pages),e(".ld-propanel-widget-reporting .pager .ld-propanel-reporting-pager-info span.pagedisplay span.total_items").html(t.pager.total_items),1==parseInt(t.pager.current_page)?(e(".ld-propanel-widget-reporting .pager .ld-propanel-reporting-pager-info button.first").attr("disabled",!0),e(".ld-propanel-widget-reporting .pager .ld-propanel-reporting-pager-info button.prev").attr("disabled",!0)):(e(".ld-propanel-widget-reporting .pager .ld-propanel-reporting-pager-info button.first").attr("disabled",!1),e(".ld-propanel-widget-reporting .pager .ld-propanel-reporting-pager-info button.prev").attr("disabled",!1)),parseInt(t.pager.current_page)==parseInt(t.pager.total_pages)?(e(".ld-propanel-widget-reporting .pager .ld-propanel-reporting-pager-info button.last").attr("disabled",!0),e(".ld-propanel-widget-reporting .pager .ld-propanel-reporting-pager-info button.next").attr("disabled",!0)):(e(".ld-propanel-widget-reporting .pager .ld-propanel-reporting-pager-info button.last").attr("disabled",!1),e(".ld-propanel-widget-reporting .pager .ld-propanel-reporting-pager-info button.next").attr("disabled",!1))):(l.reporting_pager={},e(".ld-propanel-widget-reporting .pager .ld-propanel-reporting-pager-info span.pagedisplay span.current_page").html("0"),e(".ld-propanel-widget-reporting .pager .ld-propanel-reporting-pager-info span.pagedisplay span.total_pages").html("0"),e(".ld-propanel-widget-reporting .pager .ld-propanel-reporting-pager-info span.pagedisplay span.total_items").html("0"),e(".ld-propanel-widget-reporting .pager .ld-propanel-reporting-pager-info").hide()),v(),h(),e(document).trigger("proPanel.reportingTableUpdated")}))}}function s(e){return{url:ld_propanel_settings.ajaxurl,dataType:"json",method:"get",delay:1e3,cache:!0,data:function(r){return{action:"learndash_propanel_filters_search",filter_key:e,filters:l,search:r.term||"",page:r.page||1,nonce:ld_propanel_settings.nonce,lang:ld_propanel_settings.lang}},processResults:function(e,r){return r.page=r.page||1,{results:e.data.items,pagination:{more:10*r.page<e.data.total}}}}}function g(t){if(void 0!==t){if("user"==l.type&&(i=[]).push(e(".user.select2").val()),"course"==l.type||"group"==l.type){var a=t.currentTarget,n=e(a).attr("data-user-id"),o=!1;if(e(t.currentTarget).is(":checked")?(o=!0,r.find('input.ld-propanel-report-checkbox[data-user-id="'+n+'"]').attr("checked",o),i.push(n)):(o=!1,r.find('input.ld-propanel-report-checkbox[data-user-id="'+n+'"]').attr("checked",o),i.splice(e.inArray(n,i),1)),i.length){var p=[];e.each(i,(function(r,t){-1===e.inArray(t,p)&&p.push(t)})),i=p}}e(document).trigger("proPanel.setSelectedUsers")}}function c(t){if(void 0!==t){var a=jQuery(t.currentTarget).prop("checked");r.find("tbody input.ld-propanel-report-checkbox").each((function(r,t){e(t).attr("checked",a).trigger("change")}))}}function u(){r.find("tbody input.ld-propanel-report-checkbox").length?(r.find("thead input.ld-propanel-report-checkbox").show(),r.find("tbody input.ld-propanel-report-checkbox:checkbox:not(:checked)").length?r.find("thead input.ld-propanel-report-checkbox").attr("checked",!1):r.find("thead input.ld-propanel-report-checkbox").attr("checked",!0)):r.find("thead input.ld-propanel-report-checkbox").hide()}function f(){"user"==l.type&&(i=[]).push(e(".user.select2").val()),"course"!=l.type&&"group"!=l.type||i.length&&e.each(i,(function(e,t){r.find('input.ld-propanel-report-checkbox[data-user-id="'+t+'"]').attr("checked",!0)}))}function _(){void 0!==o.reporting&&(void 0!==o.activity?jQuery("p.download-button-wrap",o.reporting).hide():jQuery("p.download-button-wrap",o.reporting).show())}function h(){void 0!==l.reporting_pager.total_items&&parseInt(l.reporting_pager.total_items)>0?(e(".email .no-results").hide(),e(".email .results").show()):(e(".email .no-results").show(),e(".email .results").hide())}function v(){if("user"==l.type)e("a.email-toggle").find("span.count").html("");else{var r=0;i.length&&(r=i.length),r>0?e("a.email-toggle").find("span.count").html(" ("+r+")"):e("a.email-toggle").find("span.count").html("")}}function b(){var r,t,a,n,p,d;if(void 0!==o.filtering){if(t=(r=e("#email",o.filtering)).find(".subject").val(),a=r.find(".message").val(),!i)return;n=r.find(".sending"),p=r.find(".sent"),d=r.find("#propanel-send-email"),n.show(),d.prop("disabled",!0),e.when(e.ajax({url:ld_propanel_settings.ajaxurl,method:"post",dataType:"json",data:{action:"learndash_propanel_email_users",user_ids:i.join(),subject:t,message:a,filters:l,nonce:ld_propanel_settings.nonce,is_debug:ld_propanel_settings.is_debug,lang:ld_propanel_settings.lang}})).done((function(e){e.success?(void 0!==e.data.message&&""!=e.data.message&&p.html(e.data.message),p.fadeIn(),n.hide(),void 0!==e.data.debug&&""!==e.data.debug&&ld_propanel_settings.is_debug&&alert(e.data.debug),setTimeout((function(){p.fadeOut(),p.html(""),d.prop("disabled",!1)}),3e3)):alert(e.data.message)}))}}function m(){void 0!==o.filtering&&(emailContainer=e("#email",o.filtering),emailContainer.find(".subject").val(""),emailContainer.find(".message").val(""),e("#propanel-send-email").prop("disabled",!0),e("#propanel-reset-email").prop("disabled",!0))}function y(){e(document.activeElement).hasClass("course-status")||void 0!==o.activity&&p(o.activity,"activity_rows")}function w(r){r.preventDefault(),template_args={};var t=e(this);template_args.paged=t.attr("data-page"),void 0!==o.activity&&p(o.activity,"activity_rows",template_args)}function k(r){if(e(document.activeElement).hasClass("course-status"))return;const t=o["progress-chart"].data("filters")||{},a=Object.assign({},l,t.filters||{});void 0!==o["progress-chart"]&&p(o["progress-chart"],"progress-chart-data",Object.assign({},t,{filters:a})),e.when(e.ajax({url:ld_propanel_settings.ajaxurl,method:"get",dataType:"json",data:{action:"learndash_propanel_get_progress_charts_data",filters:a,nonce:ld_propanel_settings.nonce,lang:ld_propanel_settings.lang}})).done((function(e){var r;e&&e.hasOwnProperty("success")&&(void 0!==(r=e.data).all_progress&&function(e){if("undefined"!=typeof proPanelProgressAllChart&&proPanelProgressAllChart.destroy(),void 0!==e.data&&void 0!==e.data.datasets&&e.data.datasets.length>0){jQuery("#proPanelProgressAllDefaultMessage").hide();var r=document.getElementById("proPanelProgressAll").getContext("2d");if(void 0!==r){var t={labels:[],datasets:[]};void 0!==e.data.labels&&(t.labels=e.data.labels),void 0!==e.data.datasets&&(t.datasets=e.data.datasets);var a={};void 0!==e.options&&(a=e.options),window.proPanelProgressAllChart=new Chart(r,{type:"doughnut",data:t,options:a})}}else jQuery("#proPanelProgressAllDefaultMessage").show(),jQuery("#proPanelProgressAll").hide(),jQuery("#proPanelProgressAll").css("height","0"),jQuery("#proPanelProgressAll").css("width","0")}(r.all_progress),void 0!==r.all_percentages&&function(e){if("undefined"!=typeof proPanelProgressAllPercentagesChart&&proPanelProgressAllPercentagesChart.destroy(),void 0!==e.data.datasets&&e.data.datasets.length>0){jQuery("#proPanelProgressInMotionDefaultMessage").hide();var r=document.getElementById("proPanelProgressInMotion").getContext("2d");if(void 0!==r){var t={labels:[],datasets:[]};void 0!==e.data.labels&&(t.labels=e.data.labels),void 0!==e.data.datasets&&(t.datasets=e.data.datasets);var a={};void 0!==e.options&&(a=e.options),window.proPanelProgressAllPercentagesChart=new Chart(r,{type:"doughnut",data:t,options:a})}}else jQuery("#proPanelProgressInMotionDefaultMessage").show(),jQuery("#proPanelProgressInMotion").hide(),jQuery("#proPanelProgressInMotion").css("height","0"),jQuery("#proPanelProgressInMotion").css("width","0")}(r.all_percentages))}))}function j(r){r.stopImmediatePropagation();var t=e(r.target).attr("data-template"),a=e(r.target).attr("data-slug"),n=e(r.target).attr("data-nonce"),o=r.target;void 0!==t&&(jQuery(r.target).prop("disabled",!0),T(t,{init:1,nonce:n,slug:a,filters:l},o))}function P(r){if(void 0!==r&&r.stopImmediatePropagation(),i=[],v(),void 0!==o.reporting&&(jQuery('.filter-selection.filter-section-date input[name="filter-date-start"]').length?l.time_start=jQuery('.filter-selection.filter-section-date input[name="filter-date-start"]').val():l.time_start="",jQuery('.filter-selection.filter-section-date input[name="filter-date-end"]').length?l.time_end=jQuery('.filter-selection.filter-section-date input[name="filter-date-end"]').val():l.time_end=""),""!==l.groups?(l.type="group",l.id=l.groups):""!==l.users?(l.type="user",l.id=l.users):""!==l.course&&(l.type="course",l.id=l.courses),void 0!==o.reporting){var t=e(".propanel-reporting",o.reporting);"group"==l.type?p(t,"group-reporting"):"course"==l.type?p(t,"course-reporting"):"user"==l.type&&p(t,"user-reporting")}l.reporting_pager.current_page=1,e(document).trigger("proPanel.filterChanged")}function Q(r){r.preventDefault(),l.reporting_pager.current_page=parseInt(l.reporting_pager.current_page),l.reporting_pager.total_pages=parseInt(l.reporting_pager.total_pages);var t=r.currentTarget,a=!1;e(t).hasClass("next")?l.reporting_pager.current_page<l.reporting_pager.total_pages&&(a=!0,l.reporting_pager.current_page=l.reporting_pager.current_page+1):e(t).hasClass("prev")?l.reporting_pager.current_page>1&&(a=!0,l.reporting_pager.current_page=l.reporting_pager.current_page-1):e(t).hasClass("first")?l.reporting_pager.current_page>1&&(a=!0,l.reporting_pager.current_page=1):e(t).hasClass("last")&&l.reporting_pager.current_page<l.reporting_pager.total_pages&&(a=!0,l.reporting_pager.current_page=l.reporting_pager.total_pages),1==a&&d()}function x(e){e.stopImmediatePropagation(),window.location.reload(!1)}function C(r){r.stopImmediatePropagation();var t=e(r.target).attr("data-template"),a=e(r.target).attr("data-slug"),n=e(r.target).attr("data-nonce"),o=r.target;if(!jQuery("#dashboard-widgets").length){var i=e(r.currentTarget).parents("div.learndash-propanel-activity");if(void 0!==i){const r=e(i).data("filters")||{},t=Object.assign({},l,r.filters||{});void 0!==t&&""!=t&&(l=t)}}void 0!==t&&(jQuery(o).prop("disabled",!0),T(t,{init:1,nonce:n,slug:a,filters:l},o))}function T(r,t,a){e.when(e.ajax({url:ld_propanel_settings.ajaxurl,method:"get",dataType:"json",data:{action:"learndash_propanel_template",template:r,args:t,nonce:ld_propanel_settings.nonce,lang:ld_propanel_settings.lang}})).done((function(t){if(void 0!==t&&void 0!==t.data.output.rows_html){var n=t.data.output.rows_html;e(window).trigger("resize");var o=0;void 0!==n.data.total_count&&(o=parseInt(n.data.total_count));var l=0;if(void 0!==n.data.result_count&&(l=parseInt(n.data.result_count)),l<o){if(void 0!==a&&jQuery(a).length&&void 0!==n.data.progress_percent){var i=parseInt(n.data.progress_percent);jQuery("span.status",a).html(" "+i+"%")}T(r,n.data,a)}else jQuery(a).prop("disabled",!1),jQuery("span.status",a).html(""),void 0!==n.data.report_download_link&&""!=n.data.report_download_link&&(window.location.href=n.data.report_download_link)}}))}function I(){if(void 0!==o.reporting&&jQuery("input.tablesorter-search",o.reporting).length){var e,r="";jQuery("input.tablesorter-search",o.reporting).focus((function(){var t=this;r=jQuery(t).val(),""!=e&&clearInterval(e),e=setInterval((function(){""==(r=jQuery(t).val())&&r!=l.search?(l.search=r,l.current_page=1,d()):(r.length>=3&&r!=l.search&&(l.search=r,l.current_page=1,d()),jQuery("input.tablesorter-search",o.reporting).is(":focus")||clearInterval(e))}),200)}))}}void 0!==(n=function(e){for(var r,t={},a=window.location.href.slice(window.location.href.indexOf("?")+1).split("&"),n=0;n<a.length;n++)t[(r=a[n].split("="))[0]]=r[1];if(void 0!==t[e])return t[e]}("LD_DEBUG"))&&""!=n&&(ld_propanel_settings.is_debug=n),e(window).resize((function(){var r;void 0!==o.reporting&&((r=o.reporting.width())<350?(o.reporting.find(".ld-propanel-reporting-pager-info").addClass("ld-propanel-full-width"),o.reporting.find(".search-wrap").addClass("ld-propanel-full-width")):(o.reporting.find(".ld-propanel-reporting-pager-info").removeClass("ld-propanel-full-width"),o.reporting.find(".search-wrap").removeClass("ld-propanel-full-width")),o.reporting.find("table.ld-propanel-reporting-table-groups-widget").length&&(r<350?o.reporting.find("table tbody td.ld-propanel-reporting-col-course").length&&o.reporting.find("td.ld-propanel-reporting-col-progress").length&&(o.reporting.find("table thead th.ld-propanel-reporting-col-progress").hide(),o.reporting.find("table tbody td.ld-propanel-reporting-col-progress").hide(),o.reporting.find("table tbody td.ld-propanel-reporting-col-course div.ld-propanel-reporting-col-progress").length?o.reporting.find("table tbody td.ld-propanel-reporting-col-course div.ld-propanel-reporting-col-progress").show():o.reporting.find("table tbody tr").each((function(){var r=e(this);if(!e(r).find("td.ld-propanel-reporting-col-course div.ld-propanel-reporting-col-progress").length&&e(r).find("td.ld-propanel-reporting-col-progress").length){var t=e(r).find("td.ld-propanel-reporting-col-progress").html();void 0!==t&&(e(r).find("td.ld-propanel-reporting-col-course").append('<div class="ld-propanel-reporting-col-progress" style="display:none; margin-top: 20px;">'+t+"</div>"),e(r).find("td.ld-propanel-reporting-col-course div.ld-propanel-reporting-col-progress").show())}}))):(o.reporting.find("table thead th.ld-propanel-reporting-col-progress").show(),o.reporting.find("table tbody td.ld-propanel-reporting-col-progress").show(),o.reporting.find("table tbody td.ld-propanel-reporting-col-course div.ld-propanel-reporting-col-progress").hide())),o.reporting.find("table.ld-propanel-reporting-table-courses-widget").length&&(r<350?o.reporting.find("table tbody td.ld-propanel-reporting-col-user").length&&o.reporting.find("td.ld-propanel-reporting-col-progress").length&&(o.reporting.find("table thead th.ld-propanel-reporting-col-progress").hide(),o.reporting.find("table tbody td.ld-propanel-reporting-col-progress").hide(),o.reporting.find("table tbody td.ld-propanel-reporting-col-user div.ld-propanel-reporting-col-progress").length?o.reporting.find("table tbody td.ld-propanel-reporting-col-user div.ld-propanel-reporting-col-progress").show():o.reporting.find("table tbody tr").each((function(){var r=e(this);if(!e(r).find("td.ld-propanel-reporting-col-course div.ld-propanel-reporting-col-progress").length&&e(r).find("td.ld-propanel-reporting-col-progress").length){var t=e(r).find("td.ld-propanel-reporting-col-progress").html();void 0!==t&&(e(r).find("td.ld-propanel-reporting-col-user").append('<div class="ld-propanel-reporting-col-progress" style="display:none; margin-top: 20px;">'+t+"</div>"),e(r).find("td.ld-propanel-reporting-col-user div.ld-propanel-reporting-col-progress").show())}}))):(o.reporting.find("table thead th.ld-propanel-reporting-col-progress").show(),o.reporting.find("table tbody td.ld-propanel-reporting-col-progress").show(),o.reporting.find("table tbody td.ld-propanel-reporting-col-user div.ld-propanel-reporting-col-progress").hide())),o.reporting.find("table.ld-propanel-reporting-table-users-widget").length&&(r<350?o.reporting.find("table tbody td.ld-propanel-reporting-col-course").length&&o.reporting.find("td.ld-propanel-reporting-col-progress").length&&(o.reporting.find("table thead th.ld-propanel-reporting-col-progress").hide(),o.reporting.find("table tbody td.ld-propanel-reporting-col-progress").hide(),o.reporting.find("table tbody td.ld-propanel-reporting-col-course div.ld-propanel-reporting-col-progress").length?o.reporting.find("table tbody td.ld-propanel-reporting-col-course div.ld-propanel-reporting-col-progress").show():o.reporting.find("table tbody tr").each((function(){var r=e(this);if(!e(r).find("td.ld-propanel-reporting-col-course div.ld-propanel-reporting-col-progress").length&&e(r).find("td.ld-propanel-reporting-col-progress").length){var t=e(r).find("td.ld-propanel-reporting-col-progress").html();void 0!==t&&(e(r).find("td.ld-propanel-reporting-col-course").append('<div class="ld-propanel-reporting-col-progress" style="display:none; margin-top: 20px;">'+t+"</div>"),e(r).find("td.ld-propanel-reporting-col-course div.ld-propanel-reporting-col-progress").show())}}))):(o.reporting.find("table thead th.ld-propanel-reporting-col-progress").show(),o.reporting.find("table tbody td.ld-propanel-reporting-col-progress").show(),o.reporting.find("table tbody td.ld-propanel-reporting-col-course div.ld-propanel-reporting-col-progress").hide()))),void 0!==o.activity&&((r=o.activity.width())<350?(o.activity.find(".report-pagination").addClass("ld-propanel-full-width"),o.activity.find(".report-exports").addClass("ld-propanel-full-width")):(o.activity.find(".report-pagination").removeClass("ld-propanel-full-width"),o.activity.find(".report-exports").removeClass("ld-propanel-full-width")))})),e(document).trigger("resize"),e(document).trigger("proPanel.loadWidgets"),e(document).on("proPanel.templateLoaded",(function(t,a){var n;"filtering"==a&&(o.filtering.on("click tap",".section-toggle",(function(){var r=e(this).attr("href");return e(this).toggleClass("active").siblings().removeClass("active"),e(""+r).toggleClass("display").siblings().removeClass("display"),!1})),e(n="select#ld-propanel-pagesize").length&&(void 0===l.reporting_pager&&(l.reporting_pager=[]),l.reporting_pager.per_page=jQuery(n+" option:checked").val(),void 0===l.reporting_pager.per_page&&(l.reporting_pager.per_page=e(n).find("option:first-child").val()),void 0===l.reporting_pager.current_page&&(l.reporting_pager.current_page=1),e(document).on("change",n,(function(){l.reporting_pager.per_page=e(this).val()}))),e(".filter-selection select",o.filtering).each((function(){var r=e(this),t=e(r).parent(".filter-selection"),a=e(t).data("filter-key");void 0!==a&&""!=a&&e(r).select2({theme:"ld_propanel",dir:window.isRtl?"rtl":"",ajax:s(a),containerCssClass:"filter-"+a+"-select2"}),e(r).change((function(){e(this);var r=e(this).val();null==r&&(e(this).val(""),r="");var t=e(this).parent(".filter-selection"),a=e(t).data("filter-key");void 0!==a&&""!=a&&(l[a]=r)}))})),void 0!==ld_propanel_settings.flatpickr_locale.months&&(void 0!==ld_propanel_settings.flatpickr_locale.months.longhand&&(flatpickr.l10ns.default.months.longhand=ld_propanel_settings.flatpickr_locale.months.longhand),void 0!==ld_propanel_settings.flatpickr_locale.months.shorthand&&(flatpickr.l10ns.default.months.shorthand=ld_propanel_settings.flatpickr_locale.months.shorthand)),void 0!==ld_propanel_settings.flatpickr_locale.weekdays&&(void 0!==ld_propanel_settings.flatpickr_locale.weekdays.longhand&&(flatpickr.l10ns.default.weekdays.longhand=ld_propanel_settings.flatpickr_locale.weekdays.longhand),void 0!==ld_propanel_settings.flatpickr_locale.weekdays.shorthand&&(flatpickr.l10ns.default.weekdays.shorthand=ld_propanel_settings.flatpickr_locale.weekdays.shorthand)),void 0!==ld_propanel_settings.flatpickr_locale.time_24hr&&(ld_propanel_settings.flatpickr_locale.time_24hr?flatpickr.l10ns.default.time_24hr=!0:flatpickr.l10ns.default.time_24hr=!1),void 0!==ld_propanel_settings.flatpickr_locale.hourAriaLabel&&(flatpickr.l10ns.default.hourAriaLabel=ld_propanel_settings.flatpickr_locale.hourAriaLabel),void 0!==ld_propanel_settings.flatpickr_locale.minuteAriaLabel&&(flatpickr.l10ns.default.minuteAriaLabel=ld_propanel_settings.flatpickr_locale.minuteAriaLabel),void 0!==ld_propanel_settings.flatpickr_locale.monthAriaLabel&&(flatpickr.l10ns.default.monthAriaLabel=ld_propanel_settings.flatpickr_locale.monthAriaLabel),void 0!==ld_propanel_settings.flatpickr_locale.rangeSeparator&&(flatpickr.l10ns.default.rangeSeparator=ld_propanel_settings.flatpickr_locale.rangeSeparator),void 0!==ld_propanel_settings.flatpickr_locale.scrollTitle&&(flatpickr.l10ns.default.scrollTitle=ld_propanel_settings.flatpickr_locale.scrollTitle),void 0!==ld_propanel_settings.flatpickr_locale.toggleTitle&&(flatpickr.l10ns.default.toggleTitle=ld_propanel_settings.flatpickr_locale.toggleTitle),void 0!==ld_propanel_settings.flatpickr_locale.weekAbbreviation&&(flatpickr.l10ns.default.weekAbbreviation=ld_propanel_settings.flatpickr_locale.weekAbbreviation),void 0!==ld_propanel_settings.flatpickr_locale.yearAriaLabel&&(flatpickr.l10ns.default.yearAriaLabel=ld_propanel_settings.flatpickr_locale.yearAriaLabel),flatpickr(".filter-selection.filter-section-date .ld_filter_section_date",{allowInput:!1,enableTime:!0,dateFormat:"Y-m-d H:i:s",altInput:!0,altFormat:ld_propanel_settings.flatpickr_date_time_format,maxDate:(new Date).fp_incr(1)}),void 0!==o.filtering&&e("#email",o.filtering).on("keyup",".subject, .message",(function(){var r=e("#email .subject",o.filtering).val(),t=e("#email .message",o.filtering).val(),a=e("#propanel-send-email"),n=e("#propanel-reset-email");""==r||""==t?(a.prop("disabled",!0),n.prop("disabled",!0)):(a.prop("disabled",!1),n.prop("disabled",!1))})),h(),o.filtering.on("click","button.filter",(function(){for(const e in o){if("filtering"===e)continue;let r=o[e].data("filters")||{filters:{}};r.filters={},o[e].data("filters",r)}P()})),o.filtering.on("click tap","#propanel-send-email",b),o.filtering.on("click tap","#propanel-reset-email",m),o.filtering.on("click","button.reset",x)),"reporting"==a&&(e(document).on("proPanel.setSelectedUsers",v),e(document).on("proPanel.setSelectedUsers",u),e(document).on("click",".ld-propanel-widget-reporting .ld-propanel-reporting-pager-info button",Q),e(document).on("click",".ld-propanel-widget-reporting button.reporting-download",j),P()),"course-reporting"==a?(d(),f(),_(),r.on("change","tbody input.ld-propanel-report-checkbox:checkbox",g),r.on("change","thead input.ld-propanel-report-checkbox:checkbox",c),e(document).on("proPanel.reportingTableUpdated",f),e(document).on("proPanel.reportingTableUpdated",u),e(document).on("proPanel.reportingTableUpdated",I)):"user-reporting"==a?(d(),f(),_(),e(document).on("proPanel.reportingTableUpdated",f),e(document).on("proPanel.reportingTableUpdated",I)):"group-reporting"==a&&(d(),f(),_(),r.on("change","tbody input.ld-propanel-report-checkbox:checkbox",g),r.on("change","thead input.ld-propanel-report-checkbox:checkbox",c),e(document).on("proPanel.reportingTableUpdated",f),e(document).on("proPanel.reportingTableUpdated",u),e(document).on("proPanel.reportingTableUpdated",I)),"activity"==a&&e(document).on("proPanel.filterChanged",y),"activity_rows"!=a&&"activity"!=a||(e(".report-pagination .ld-propanel-reporting-pager-info > button",o.activity).on("click",w),e(document).on("click","button.download-activity",C)),"progress-chart"==a&&(k(),e(document).on("proPanel.filterChanged",k))})),a=e(".ld-propanel-widget"),e.each(a,(function(){var r=e(this).data("ld-widget-type");o[r]=e(this)})),e.each(o,(function(){var r=e(this).data("ld-widget-type"),t=e(this).data("filters");if(void 0===o.filtering&&void 0!==t&&""!=t)for(var a in l)void 0!==t[a]&&""!=t[a]&&("reporting_pager"==a?void 0===o.filtering&&(l[a]=t[a]):l[a]=t[a]);p(o[r],r,t)})),Object.keys(o).length&&void 0===l.reporting_pager.per_page&&(l.reporting_pager.per_page=ld_propanel_settings.default_per_page,l.reporting_pager.current_page=1),""!=t&&null!=t||(t=e("#learndash-propanel-reporting").length&&e("#learndash-propanel-reporting").hasClass("single-view")?"full":"widget"),void 0===o.filtering&&void 0!==l&&(void 0!==o.reporting&&(""!=l.id&&""!=l.type||delete o.reporting),void 0!==o["progress-chart"]&&(""!=l.id&&""!=l.type||delete o["progress-chart"],e(document).on("proPanel.filterChanged",k)),setTimeout((function(){P()}),ld_propanel_settings.template_load_delay))})),jQuery(document).ready((function(){jQuery(".ld-propanel-widget-activity").on("click","a.user_statistic",(function(e){e.preventDefault();var r=jQuery(this).data("ref_id"),t={action:"wp_pro_quiz_admin_ajax_statistic_load_user",func:"statisticLoadUser",data:{quizId:jQuery(this).data("quiz_id"),userId:jQuery(this).data("user_id"),refId:r,statistic_nonce:jQuery(this).data("statistic_nonce"),avg:0,lang:ld_propanel_settings.lang}};jQuery("#wpProQuiz_user_overlay, #wpProQuiz_loadUserData").show();var a=jQuery("#wpProQuiz_user_content").hide();jQuery.when(jQuery.ajax({type:"POST",url:ld_propanel_settings.ajaxurl,dataType:"json",cache:!1,data:t})).done((function(e){void 0!==e.html&&(a.html(e.html),jQuery("a.wpProQuiz_update",a).remove(),jQuery("a#wpProQuiz_resetUserStatistic",a).remove(),jQuery("#wpProQuiz_user_content").show(),jQuery("body").trigger("learndash-statistics-contentchanged"),jQuery("#wpProQuiz_loadUserData").hide(),a.find(".statistic_data").click((function(){return jQuery(this).parents("tr").next().toggle("fast"),!1})))})),jQuery("#wpProQuiz_overlay_close").click((function(){jQuery("#wpProQuiz_user_overlay").hide()}))}))}));