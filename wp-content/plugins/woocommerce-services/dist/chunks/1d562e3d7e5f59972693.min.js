(window.webpackJsonp=window.webpackJsonp||[]).push([[140],{672:function(e,t,n){"use strict";var a=n(260),o=n.n(a),i=n(69),r=n.n(i),s=n(2),l=n.n(s),c=n(32),u=n.n(c);t.a=function(e){var t=e.className,n=e.children,a=r()(e,["className","children"]);return l.a.createElement("fieldset",o()({},a,{className:u()(t,"form-fieldset")}),n)}},674:function(e,t,n){"use strict";var a=n(2),o=n.n(a),i=n(19),r=n.n(i),s=n(32),l=n.n(s),c=n(261),u=n.n(c),p=function(e){var t=e.text,n=e.type,a=void 0===n?"input-validation":n;return o.a.createElement("div",{className:l()("field-error","field-error__".concat(a))},o.a.createElement(u.a,{size:24,icon:"notice-outline"})," ",o.a.createElement("span",null,t))};p.propTypes={text:r.a.string.isRequired,type:r.a.string},t.a=p},675:function(e,t,n){"use strict";n.d(t,"a",function(){return N});var a=n(260),o=n.n(a),i=n(52),r=n.n(i),s=n(78),l=n.n(s),c=n(90),u=n.n(c),p=n(84),d=n.n(p),m=n(91),h=n.n(m),f=n(5),b=n.n(f),v=n(2),g=n.n(v),y=n(19),k=n.n(y),E=n(32),C=n.n(E),w=n(0),N=function(e){function t(){return r()(this,t),u()(this,d()(t).apply(this,arguments))}return h()(t,e),l()(t,[{key:"render",value:function(){var e=C()(this.props.className,"form-setting-explanation",{"no-validate":this.props.noValidate,"is-indented":this.props.isIndented});return g.a.createElement("p",o()({},Object(w.omit)(this.props,"className","noValidate","isIndented"),{className:e}),this.props.children)}}]),t}(g.a.Component);b()(N,"displayName","FormSettingExplanation"),b()(N,"propTypes",{noValidate:k.a.bool,isIndented:k.a.bool,className:k.a.string}),b()(N,"defaultProps",{noValidate:!1,isIndented:!1})},676:function(e,t,n){"use strict";var a=n(260),o=n.n(a),i=n(69),r=n.n(i),s=n(2),l=n.n(s),c=n(32),u=n.n(c);t.a=function(e){var t=e.className,n=e.children,a=r()(e,["className","children"]);return l.a.createElement("legend",o()({},a,{className:u()(t,"form-legend")}),n)}},677:function(e,t,n){"use strict";var a=n(260),o=n.n(a),i=n(69),r=n.n(i),s=n(2),l=n.n(s),c=n(32),u=n.n(c);t.a=function(e){var t=e.className,n=e.children,a=r()(e,["className","children"]);return l.a.createElement("h3",o()({},a,{className:u()(t,"form-section-heading")}),n)}},679:function(e,t,n){"use strict";var a=n(260),o=n.n(a),i=n(69),r=n.n(i),s=n(2),l=n.n(s),c=n(32),u=n.n(c);n(686);t.a=function(e){var t=e.inputRef,n=e.className,a=e.isError,i=r()(e,["inputRef","className","isError"]);return l.a.createElement("select",o()({},i,{ref:t,className:u()(n,"form-select",{"is-error":a})}))}},680:function(e,t,n){"use strict";var a=n(260),o=n.n(a),i=n(52),r=n.n(i),s=n(78),l=n.n(s),c=n(90),u=n.n(c),p=n(84),d=n.n(p),m=n(92),h=n.n(m),f=n(91),b=n.n(f),v=n(5),g=n.n(v),y=n(19),k=n.n(y),E=n(2),C=n.n(E),w=n(0),N=n(689),_=n(409),R=n.n(_),O=n(32),I=n.n(O),D=function(e){function t(){var e,n;r()(this,t);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return n=u()(this,(e=d()(t)).call.apply(e,[this].concat(o))),g()(h()(n),"_onButtonClick",function(e){e.onClick?e.onClick(n._close.bind(h()(n),e.action)):n._close(e.action)}),g()(h()(n),"_close",function(e){n.props.onDialogClose&&n.props.onDialogClose(e)}),n}return b()(t,e),l()(t,[{key:"render",value:function(){var e=this.props,t=e.additionalClassNames,n=e.isBackdropVisible,a=e.baseClassName,o=e.isFullScreen,i=e.shouldCloseOnEsc,r=a+"__content",s=I()(a,"card",t),l=I()(a+"__backdrop",{"is-full-screen":!!o,"is-hidden":!n});return C.a.createElement(R.a,{isOpen:this.props.isVisible,onRequestClose:this._close,closeTimeoutMS:this.props.leaveTimeout,contentLabel:this.props.label,appElement:document.getElementById("wpcom"),overlayClassName:l,className:s,htmlOpenClassName:"ReactModal__Html--open",role:"dialog",shouldCloseOnEsc:i},C.a.createElement("div",{className:I()(this.props.className,r),tabIndex:"-1"},this.props.children),this._renderButtonsBar())}},{key:"_renderButtonsBar",value:function(){var e=this.props.baseClassName+"__action-buttons";return this.props.buttons?C.a.createElement("div",{className:e},this.props.buttons.map(this._renderButton,this)):null}},{key:"_renderButton",value:function(e,t){if(C.a.isValidElement(e))return C.a.cloneElement(e,{key:"dialog-button-"+t});var n=this._getButtonClasses(e),a=this._onButtonClick.bind(this,e);return C.a.createElement("button",{key:e.action,className:n,"data-e2e-button":e.action,"data-tip-target":"dialog-base-action-".concat(e.action),onClick:a,disabled:!!e.disabled},C.a.createElement("span",{className:this.props.baseClassName+"__button-label"},e.label))}},{key:"_getButtonClasses",value:function(e){var t=e.className||"button";return(e.isPrimary||1===this.props.buttons.length)&&(t+=" is-primary"),e.additionalClassNames&&(t+=" "+e.additionalClassNames),t}}]),t}(E.Component);g()(D,"propTypes",{additionalClassNames:k.a.oneOfType([k.a.object,k.a.string]),autoFocus:k.a.bool,baseClassName:k.a.string,buttons:k.a.array,className:k.a.string,isBackdropVisible:k.a.bool,isFullScreen:k.a.bool,isVisible:k.a.bool,label:k.a.string,leaveTimeout:k.a.number,onDialogClose:k.a.func,shouldCloseOnEsc:k.a.bool}),g()(D,"defaultProps",{baseClassName:"dialog",isBackdropVisible:!0,isFullScreen:!0,autoFocus:!0,label:""});var x=D,P=function(e){function t(){var e,n;r()(this,t);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return n=u()(this,(e=d()(t)).call.apply(e,[this].concat(o))),g()(h()(n),"checkOnClosed",function(e){null===e&&Object(w.defer)(n.props.onClosed)}),g()(h()(n),"onDialogClose",function(e){n.props.onClose&&n.props.onClose(e)}),n}return b()(t,e),l()(t,[{key:"render",value:function(){return C.a.createElement(N.a,null,C.a.createElement(x,o()({},this.props,{ref:this.checkOnClosed,key:"dialog",onDialogClose:this.onDialogClose})))}}]),t}(E.Component);g()(P,"propTypes",{isVisible:k.a.bool,baseClassName:k.a.string,leaveTimeout:k.a.number,onClose:k.a.func,onClosed:k.a.func,shouldCloseOnEsc:k.a.bool}),g()(P,"defaultProps",{isVisible:!1,leaveTimeout:200,onClosed:w.noop});t.a=P},686:function(e,t,n){},689:function(e,t,n){"use strict";n.d(t,"a",function(){return _});var a=n(52),o=n.n(a),i=n(78),r=n.n(i),s=n(90),l=n.n(s),c=n(84),u=n.n(c),p=n(92),d=n.n(p),m=n(91),h=n.n(m),f=n(5),b=n.n(f),v=n(112),g=n.n(v),y=n(19),k=n.n(y),E=n(2),C=n.n(E),w=n(61),N=n(181),_=function(e){function t(){var e,n;o()(this,t);for(var a=arguments.length,i=new Array(a),r=0;r<a;r++)i[r]=arguments[r];return n=l()(this,(e=u()(t)).call.apply(e,[this].concat(i))),b()(d()(n),"renderChildren",function(){var e;e=n.props&&(Object.keys(n.props).length>1||!n.props.children)?C.a.createElement("div",n.props,n.props.children):n.props.children,n.context.store&&(e=C.a.createElement(w.a,{store:n.context.store},C.a.createElement(N.b,null,e))),g.a.render(e,n.container)}),n}return h()(t,e),r()(t,[{key:"componentDidMount",value:function(){this.container=document.createElement("div"),document.body.appendChild(this.container),this.renderChildren()}},{key:"componentDidUpdate",value:function(){this.renderChildren()}},{key:"componentWillUnmount",value:function(){this.container&&(g.a.unmountComponentAtNode(this.container),document.body.removeChild(this.container),delete this.container)}},{key:"render",value:function(){return null}}]),t}(C.a.Component);b()(_,"contextTypes",{store:k.a.object})},690:function(e,t,n){"use strict";var a=n(52),o=n.n(a),i=n(78),r=n.n(i),s=n(90),l=n.n(s),c=n(84),u=n.n(c),p=n(92),d=n.n(p),m=n(91),h=n.n(m),f=n(5),b=n.n(f),v=n(19),g=n.n(v),y=n(2),k=n.n(y),E=n(32),C=n.n(E),w=n(8),N=n(0),_=n(703),R=n(846),O=n(261),I=n.n(O),D=(n(701),function(e){function t(){var e,n;o()(this,t);for(var a=arguments.length,i=new Array(a),r=0;r<a;r++)i[r]=arguments[r];return n=l()(this,(e=u()(t)).call.apply(e,[this].concat(i))),b()(d()(n),"state",{expanded:n.props.expanded}),b()(d()(n),"onClick",function(){n.props.children&&n.setState({expanded:!n.state.expanded}),n.props.onClick&&n.props.onClick(),n.state.expanded?n.props.onClose(n.props.cardKey):n.props.onOpen(n.props.cardKey)}),n}return h()(t,e),r()(t,[{key:"componentWillReceiveProps",value:function(e){e.expanded!==this.props.expanded&&this.setState({expanded:e.expanded})}},{key:"getClickAction",value:function(){if(!this.props.disabled)return this.onClick}},{key:"getActionButton",value:function(){return this.state.expanded&&this.props.actionButtonExpanded||this.props.actionButton}},{key:"renderActionButton",value:function(){var e=this.props.clickableHeader?null:this.getClickAction();if(this.props.actionButton)return k.a.createElement("div",{className:"foldable-card__action",role:"presentation",onClick:e},this.getActionButton());if(this.props.children){var t=this.props.screenReaderText||this.props.translate("More");return k.a.createElement("button",{disabled:this.props.disabled,type:"button",className:"foldable-card__action foldable-card__expand",onClick:e},k.a.createElement(_.a,null,t),k.a.createElement(I.a,{icon:this.props.icon,size:24}))}}},{key:"renderContent",value:function(){return k.a.createElement("div",{className:"foldable-card__content"},this.props.children)}},{key:"renderHeader",value:function(){var e=this.props.summary?k.a.createElement("span",{className:"foldable-card__summary"},this.props.summary," "):null,t=this.props.expandedSummary?k.a.createElement("span",{className:"foldable-card__summary-expanded"},this.props.expandedSummary," "):null,n=this.props.clickableHeader?this.getClickAction():null,a=C()("foldable-card__header",{"is-clickable":!!this.props.clickableHeader,"has-border":!!this.props.summary});return k.a.createElement("div",{className:a,role:"presentation",onClick:n},k.a.createElement("span",{className:"foldable-card__main"},this.props.header," "),k.a.createElement("span",{className:"foldable-card__secondary"},e,t,this.renderActionButton()))}},{key:"render",value:function(){var e=C()("foldable-card","card",this.props.className,{"is-disabled":!!this.props.disabled,"is-expanded":!!this.state.expanded,"has-expanded-summary":!!this.props.expandedSummary,"is-compact":!!this.props.compact});return k.a.createElement(R.a,{className:e},this.renderHeader(),this.state.expanded&&this.renderContent())}}]),t}(y.Component));b()(D,"displayName","FoldableCard"),b()(D,"propTypes",{actionButton:g.a.element,actionButtonExpanded:g.a.element,cardKey:g.a.string,compact:g.a.bool,disabled:g.a.bool,expandedSummary:g.a.oneOfType([g.a.string,g.a.element]),expanded:g.a.bool,icon:g.a.string,onClick:g.a.func,onClose:g.a.func,onOpen:g.a.func,screenReaderText:g.a.oneOfType([g.a.string,g.a.bool]),summary:g.a.oneOfType([g.a.string,g.a.element])}),b()(D,"defaultProps",{onOpen:N.noop,onClose:N.noop,cardKey:"",icon:"chevron-down",expanded:!1,screenReaderText:!1}),t.a=Object(w.localize)(D)},693:function(e,t,n){"use strict";var a=n(2),o=n.n(a),i=n(19),r=n.n(i),s=n(672),l=n(679),c=n(676),u=n(674),p=n(675),d=function(e){var t=e.id,n=e.valuesMap,i=e.title,r=e.description,d=e.value,m=e.updateValue,h=e.error,f=e.disabled,b=e.className,v=Object(a.useCallback)(function(e){return m(e.target.value,e)},[m]);return o.a.createElement(s.a,{className:b},o.a.createElement(c.a,null,i),o.a.createElement(l.a,{id:t,name:t,value:d,onChange:v,disabled:Boolean(f),isError:Boolean(h)},Object.keys(n).map(function(e){return o.a.createElement("option",{key:e,value:e},n[e])})),h&&"string"===typeof h&&o.a.createElement(u.a,{text:h}),!h&&r&&o.a.createElement(p.a,null,r))};d.propTypes={id:r.a.string.isRequired,valuesMap:r.a.object.isRequired,title:r.a.node,description:r.a.string,value:r.a.string.isRequired,updateValue:r.a.func.isRequired,error:r.a.oneOfType([r.a.string,r.a.bool]),disabled:r.a.bool,className:r.a.string},t.a=d},701:function(e,t,n){},717:function(e,t,n){"use strict";n.d(t,"a",function(){return _});var a=n(260),o=n.n(a),i=n(69),r=n.n(i),s=n(52),l=n.n(s),c=n(78),u=n.n(c),p=n(90),d=n.n(p),m=n(84),h=n.n(m),f=n(91),b=n.n(f),v=n(5),g=n.n(v),y=n(2),k=n.n(y),E=n(19),C=n.n(E),w=n(32),N=n.n(w),_=function(e){function t(){return l()(this,t),d()(this,h()(t).apply(this,arguments))}return b()(t,e),u()(t,[{key:"render",value:function(){var e=N()("button",this.props.className,{"is-compact":this.props.compact,"is-primary":this.props.primary,"is-scary":this.props.scary,"is-busy":this.props.busy,"is-borderless":this.props.borderless});if(this.props.href){var t=this.props,n=(t.compact,t.primary,t.scary,t.busy,t.borderless,t.type,r()(t,["compact","primary","scary","busy","borderless","type"])),a=n.target?(n.rel||"").replace(/noopener|noreferrer/g,"")+" noopener noreferrer":n.rel;return k.a.createElement("a",o()({},n,{rel:a,className:e}))}var i=this.props,s=(i.compact,i.primary,i.scary,i.busy,i.borderless,i.target,i.rel,r()(i,["compact","primary","scary","busy","borderless","target","rel"]));return k.a.createElement("button",o()({},s,{className:e}))}}]),t}(y.PureComponent);g()(_,"propTypes",{compact:C.a.bool,primary:C.a.bool,scary:C.a.bool,busy:C.a.bool,type:C.a.string,href:C.a.string,borderless:C.a.bool,target:C.a.string,rel:C.a.string}),g()(_,"defaultProps",{type:"button"})},737:function(e,t,n){"use strict";var a=n(52),o=n.n(a),i=n(78),r=n.n(i),s=n(90),l=n.n(s),c=n(84),u=n.n(c),p=n(92),d=n.n(p),m=n(91),h=n.n(m),f=n(5),b=n.n(f),v=n(19),g=n.n(v),y=n(2),k=n.n(y),E=n(112),C=n.n(E),w=n(61),N=n(41),_=n.n(N),R=n(32),O=n.n(R),I=n(739),D=n.n(I),x=n(0),P=n(689),T=n(53),j=n.n(T),S=n(755),q=n.n(S),M=_()("calypso:popover:util");function L(){var e={};return e.top=window.scrollY,e.left=window.scrollX,e.width=window.innerWidth,e.height=window.innerHeight,e.right=e.left+e.width,e.bottom=e.top+e.height,M("viewport: %o",e),e}var B={top:"bottom",bottom:"top",left:"right",right:"left"},A={top:"right",left:"top",bottom:"left",right:"bottom"},z=L();function V(){z=L()}var F=!1,H=function(){if(F)return M("window events already bound");F=!0,M("bind handlers to `resize` and `scroll` events"),window.addEventListener("resize",V,!0),window.addEventListener("scroll",V,!0)},U=function(){if(!F)return M("window events are not bound");F=!1,M("unbind handlers to `resize` and `scroll` events"),window.removeEventListener("resize",V,!0),window.removeEventListener("scroll",V,!0)},K=function(e,t,n){var a=q()(n),o=t.clientHeight,i=t.clientWidth,r={top:a.top-o,bottom:z.height-a.bottom-o,left:a.left-i,right:z.width-a.right-i},s=e.split(/\s+/),l=j()(s,1)[0],c=j()(s,2)[1],u=function(e,t){for(var n,a=[e,B[e],A[e],B[A[e]]],o=-1/0,i=0,r=a.length;i<r;i++){var s=a[i],l=t[s];if(l>0)return s;l>o&&(o=l,n=e)}return n}(l,r);return c!==u&&c!==B[u]||(c=null),function(e,t,n,a,o,i){for(var r,s="top"===e||"bottom"===e,l=t?[s?"".concat(e," ").concat(t):"".concat(t," ").concat(e),e,s?"".concat(e," ").concat(B[t]):"".concat(B[t]," ").concat(e)]:[e,s?"".concat(e," ").concat(A[e]):"".concat(A[e]," ").concat(e),s?"".concat(e," ").concat(B[A[e]]):"".concat(B[A[e]]," ").concat(e)],c=0,u=o*i,p=0,d=l.length;p<d;p++){var m=l[p],h=W(m,n,a),f=h.left+o,b=h.top+i,v=Math.min(h.top<z.top?b-z.top:z.bottom-h.top,i),g=Math.min(h.left<z.left?f-z.left:z.right-h.left,o),y=g*v;if(y===u)return m;y>c&&(c=y,r=m)}return r}(u,c,t,n,i,o)||e};function W(e,t,n,a){var o=q()(t);if(!o)throw new Error("could not get bounding client rect of Tip element");var i=o.width,r=o.height,s=q()(n);if(!s)throw new Error("could not get bounding client rect of `target`");var l=s.width,c=s.height,u=function(e,t){var n=t.body||t.getElementsByTagName("body")[0],a=t.documentElement||n.parentNode,o=a.clientTop||n.clientTop||0,i=a.clientLeft||n.clientLeft||0,r=window.pageYOffset||a.scrollTop,s=window.pageXOffset||a.scrollLeft;return{top:e.top+r-o,left:e.left+s-i}}(s,document);if(!u)throw new Error("could not determine page offset of `target`");var p={};switch(e){case"top":p={top:u.top-r,left:a&&a.left?u.left+a.left:u.left+l/2-i/2};break;case"bottom":p={top:u.top+c,left:a&&a.left?u.left+a.left:u.left+l/2-i/2};break;case"right":p={top:u.top+c/2-r/2,left:u.left+l};break;case"left":p={top:u.top+c/2-r/2,left:u.left-i};break;case"top left":p={top:u.top-r,left:u.left+l/2-i+15};break;case"top right":p={top:u.top-r,left:u.left+l/2-15};break;case"bottom left":p={top:u.top+c,left:u.left+l/2-i+15};break;case"bottom right":p={top:u.top+c,left:u.left+l/2-15};break;case"left top":p={top:u.top+c/2-r,left:u.left-i};break;case"left bottom":p={top:u.top+c/2,left:u.left-i};break;case"right top":p={top:u.top+c/2-r,left:u.left+l};break;case"right bottom":p={top:u.top+c/2,left:u.left+l};break;default:throw new Error('invalid position "'.concat(e,'"'))}return p}var Y=function(){},J=_()("calypso:popover"),X=new Set,G=function(e){function t(e){var n;return o()(this,t),n=l()(this,u()(t).call(this,e)),b()(d()(n),"isUpdatingPosition",!1),n.setPopoverId(e.id),n.setDOMBehavior=n.setDOMBehavior.bind(d()(n)),n.setPosition=n.setPosition.bind(d()(n)),n.onClickout=n.onClickout.bind(d()(n)),n.onKeydown=n.onKeydown.bind(d()(n)),n.onWindowChange=n.onWindowChange.bind(d()(n)),n.state={show:e.isVisible,left:-99999,top:-99999,positionClass:n.getPositionClass(e.position)},n}return h()(t,e),r()(t,[{key:"componentDidMount",value:function(){this.state.show&&(this.bindEscKeyListener(),this.bindDebouncedReposition(),H())}},{key:"componentWillReceiveProps",value:function(e){if(this.domContext=C.a.findDOMNode(e.context),!e.isVisible)return null;this.setPosition()}},{key:"componentDidUpdate",value:function(e,t){var n=this,a=this.props.isVisible;return!t.show&&this.state.show&&(this.bindEscKeyListener(),this.bindDebouncedReposition(),H()),a!==e.isVisible&&(a?this.show():this.hide()),this.domContainer&&this.domContext&&a?void(this.isUpdatingPosition||(this.debug("requesting to update position after render completes"),requestAnimationFrame(function(){X.has(n.id)&&n.domContainer&&n.domContext&&a?(n.setPosition(),n.isUpdatingPosition=!1):n.isUpdatingPosition=!1}),this.isUpdatingPosition=!0)):null}},{key:"componentWillUnmount",value:function(){this.debug("unmounting .... "),this.unbindClickoutHandler(),this.unbindDebouncedReposition(),this.unbindEscKeyListener(),U(),X.delete(this.id),J("current popover instances: ",X.size)}},{key:"bindEscKeyListener",value:function(){if(!this.props.closeOnEsc)return null;this.debug("adding escKey listener ..."),document.addEventListener("keydown",this.onKeydown,!0)}},{key:"unbindEscKeyListener",value:function(){if(!this.props.closeOnEsc)return null;this.debug("unbinding `escKey` listener ..."),document.removeEventListener("keydown",this.onKeydown,!0)}},{key:"onKeydown",value:function(e){if(27!==e.keyCode)return null;this.close(!0)}},{key:"bindClickoutHandler",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.domContainer;return e?this._clickoutHandlerReference?(this.debug("clickout event already bound"),null):(this.debug("binding `clickout` event"),void(this._clickoutHandlerReference=D()(e,this.onClickout))):(this.debug("no element to bind clickout "),null)}},{key:"unbindClickoutHandler",value:function(){this._clickoutHandlerReference&&(this.debug("unbinding `clickout` listener ..."),this._clickoutHandlerReference(),this._clickoutHandlerReference=null)}},{key:"onClickout",value:function(e){var t=this.domContext&&this.domContext.contains&&!this.domContext.contains(e.target);if(this.props.ignoreContext&&t){var n=C.a.findDOMNode(this.props.ignoreContext);t=t&&n&&n.contains&&!n.contains(e.target)}t&&this.close()}},{key:"bindDebouncedReposition",value:function(){window.addEventListener("scroll",this.onWindowChange,!0),window.addEventListener("resize",this.onWindowChange,!0)}},{key:"unbindDebouncedReposition",value:function(){this.willReposition&&(window.cancelAnimationFrame(this.willReposition),this.willReposition=null),window.removeEventListener("scroll",this.onWindowChange,!0),window.removeEventListener("resize",this.onWindowChange,!0),this.debug("unbinding `debounce reposition` ...")}},{key:"onWindowChange",value:function(){this.willReposition=window.requestAnimationFrame(this.setPosition)}},{key:"setDOMBehavior",value:function(e){if(!e)return this.unbindClickoutHandler(),null;this.debug("setting DOM behavior"),this.bindClickoutHandler(e),this.domContainer=e,this.domContext=C.a.findDOMNode(this.props.context),this.setPosition()}},{key:"getPositionClass",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props.position;return"is-".concat(e.replace(/\s+/g,"-"))}},{key:"adjustRtlPosition",value:function(e){if(this.props.isRtl)switch(e){case"top right":case"right top":return"top left";case"right":return"left";case"bottom right":case"right bottom":return"bottom left";case"bottom left":case"left bottom":return"bottom right";case"left":return"right";case"top left":case"left top":return"top right"}return e}},{key:"computePosition",value:function(){if(!this.props.isVisible)return null;var e=this.domContainer,t=this.domContext,n=this.props,a=n.position,o=n.relativePosition;if(!e||!t)return this.debug("[WARN] no DOM elements to work"),null;var i=a;this.debug("position: %o",i),this.props.autoRtl&&(i=this.adjustRtlPosition(i),this.debug("RTL adjusted position: %o",i)),this.props.autoPosition&&(i=K(i,e,t),this.debug("suggested position: %o",i));var r=Object.assign({},function(e,t){var n=q()(t).width;return e.left=Math.max(0,Math.min(e.left,z.width-n)),e}(W(i,e,t,o),e),{positionClass:this.getPositionClass(i)});return this.debug("updating reposition: ",r),r}},{key:"debug",value:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),a=1;a<t;a++)n[a-1]=arguments[a];J.apply(void 0,["[%s] ".concat(e),this.id].concat(n))}},{key:"setPopoverId",value:function(e){this.id=e||"pop__".concat(Object(x.uniqueId)()),X.add(this.id),this.debug("creating ..."),J("current popover instances: ",X.size)}},{key:"setPosition",value:function(){var e;if(this.debug("updating position"),!(e=this.props.customPosition?Object.assign({positionClass:this.getPositionClass(this.constructor.defaultProps.position)},this.props.customPosition):this.computePosition()))return null;this.willReposition=null,this.setState(e)}},{key:"getStylePosition",value:function(){var e=this.state;return{left:e.left,top:e.top}}},{key:"show",value:function(){var e=this;if(!this.props.showDelay)return this.setState({show:!0}),null;this.debug("showing in %o","".concat(this.props.showDelay,"ms")),this.clearShowTimer(),this._openDelayTimer=setTimeout(function(){e.setState({show:!0})},this.props.showDelay)}},{key:"hide",value:function(){this.unbindClickoutHandler(),this.unbindDebouncedReposition(),this.unbindEscKeyListener(),U(),this.setState({show:!1}),this.clearShowTimer()}},{key:"clearShowTimer",value:function(){if(!this._openDelayTimer)return null;clearTimeout(this._openDelayTimer),this._openDelayTimer=null}},{key:"close",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.props.isVisible)return this.debug("popover should be already closed"),null;this.props.onClose(e)}},{key:"render",value:function(){if(!this.state.show)return this.debug("is hidden. return no render"),null;if(!this.props.context)return this.debug("No `context` to tie. return no render"),null;var e=O()("popover",this.props.className,this.state.positionClass);return this.debug("rendering ..."),k.a.createElement(P.a,{className:this.props.rootClassName},k.a.createElement("div",{style:this.getStylePosition(),className:e},k.a.createElement("div",{className:"popover__arrow"}),k.a.createElement("div",{ref:this.setDOMBehavior,className:"popover__inner"},this.props.children)))}}]),t}(y.Component);b()(G,"propTypes",{autoPosition:g.a.bool,autoRtl:g.a.bool,className:g.a.string,closeOnEsc:g.a.bool,id:g.a.string,ignoreContext:g.a.shape({getDOMNode:g.a.function}),isRtl:g.a.bool,isVisible:g.a.bool,position:g.a.oneOf(["top","top right","right","bottom right","bottom","bottom left","left","top left"]),rootClassName:g.a.string,showDelay:g.a.number,onClose:g.a.func,onShow:g.a.func,relativePosition:g.a.shape({left:g.a.number}),customPosition:g.a.shape({top:g.a.number,left:g.a.number,positionClass:g.a.oneOf(["top","right","bottom","left"])})}),b()(G,"defaultProps",{autoPosition:!0,autoRtl:!0,className:"",closeOnEsc:!0,isRtl:!1,isVisible:!1,position:"top",showDelay:0,onClose:Y,onShow:Y});t.a=Object(w.b)(function(e){return{isRtl:document.body.classList.contains("rtl")}})(G)},756:function(e,t,n){"use strict";var a=n(52),o=n.n(a),i=n(78),r=n.n(i),s=n(90),l=n.n(s),c=n(84),u=n.n(c),p=n(92),d=n.n(p),m=n(91),h=n.n(m),f=n(5),b=n.n(f),v=n(61),g=n(8),y=n(19),k=n.n(y),E=n(2),C=n.n(E),w=n(0),N=(n(824),n(408)),_=n(261),R=n.n(_),O=n(667),I=n(36),D=n(430),x=n(32),P=n.n(x),T=n(717),j=n(737),S=function(e){return"HR"===e.tagName},q=function(e){function t(){var e,n;o()(this,t);for(var a=arguments.length,i=new Array(a),r=0;r<a;r++)i[r]=arguments[r];return n=l()(this,(e=u()(t)).call.apply(e,[this].concat(i))),b()(d()(n),"menu",C.a.createRef()),b()(d()(n),"_setPropsOnChild",function(e){if(null==e)return e;var t=n._onClose.bind(d()(n),e.props.action),a=t;return e.props.onClick&&(a=Object(w.over)([e.props.onClick,t])),C.a.cloneElement(e,{onClick:a})}),b()(d()(n),"_onShow",function(){var e=n.menu.current;n._previouslyFocusedElement=document.activeElement,e&&e.focus()}),b()(d()(n),"_getClosestSibling",function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],a=n.menu.current,o=a.firstChild,i=a.lastChild;if(t||(o=a.lastChild,i=a.firstChild),e===a)return o;var r=e[t?"nextSibling":"previousSibling"]||i;return S(r)?n._getClosestSibling(r,t):r}),b()(d()(n),"_onKeyDown",function(e){var t,a=e.target,o=!1;switch(e.keyCode){case 9:n.props.onClose(),o=!0;break;case 38:t=n._getClosestSibling(a,!1),o=!0;break;case 40:t=n._getClosestSibling(a,!0),o=!0}t&&t.focus(),o&&e.preventDefault()}),b()(d()(n),"_onClose",function(e){n._previouslyFocusedElement&&(n._previouslyFocusedElement.focus(),n._previouslyFocusedElement=null),n.props.onClose&&n.props.onClose(e)}),n}return h()(t,e),r()(t,[{key:"componentWillUnmount",value:function(){this._previouslyFocusedElement=null}},{key:"render",value:function(){var e=this.props,t=e.popoverComponent,n=e.autoPosition,a=e.className,o=e.context,i=e.customPosition,r=e.isVisible,s=e.popoverTitle,l=e.position,c=e.rootClassName;return C.a.createElement(t,{onClose:this._onClose,onShow:this._onShow,autoPosition:n,className:a,context:o,customPosition:i,isVisible:r,popoverTitle:s,position:l,rootClassName:c},C.a.createElement("div",{ref:this.menu,role:"menu",className:"popover__menu",onKeyDown:this._onKeyDown,tabIndex:"-1"},C.a.Children.map(this.props.children,this._setPropsOnChild,this)))}}]),t}(E.Component);b()(q,"propTypes",{autoPosition:k.a.bool,isVisible:k.a.bool.isRequired,onClose:k.a.func.isRequired,position:k.a.string,className:k.a.string,rootClassName:k.a.string,popoverComponent:k.a.func,popoverTitle:k.a.string,customPosition:k.a.object}),b()(q,"defaultProps",{autoPosition:!0,position:"top",popoverComponent:j.a});var M=q,L=(n(825),function(e){function t(){var e,n;o()(this,t);for(var a=arguments.length,i=new Array(a),r=0;r<a;r++)i[r]=arguments[r];return n=l()(this,(e=u()(t)).call.apply(e,[this].concat(i))),b()(d()(n),"state",{isMenuVisible:!1}),b()(d()(n),"popoverContext",C.a.createRef()),b()(d()(n),"handleClick",function(e){var t=n.props.onClick,a=n.state.isMenuVisible;t(e),a?n.hideMenu():n.showMenu()}),b()(d()(n),"hideMenu",function(){return n.toggleMenu(!1)}),b()(d()(n),"showMenu",function(){return n.toggleMenu(!0)}),n}return h()(t,e),r()(t,[{key:"toggleMenu",value:function(e){this.props.disabled||(this.setState({isMenuVisible:e}),this.props.onToggle(e))}},{key:"render",value:function(){var e=this.props,t=e.toggleTitle,n=e.translate,a=e.position,o=e.children,i=e.disabled,r=e.className,s=e.popoverClassName,l=this.state.isMenuVisible,c=P()("ellipsis-menu",r,{"is-menu-visible":l,"is-disabled":i}),u=P()("ellipsis-menu__menu","popover",s);return C.a.createElement("span",{className:c},C.a.createElement(T.a,{ref:this.popoverContext,onClick:this.handleClick,title:t||n("Toggle menu"),borderless:!0,disabled:i,className:"ellipsis-menu__toggle"},C.a.createElement(R.a,{icon:"ellipsis",className:"ellipsis-menu__toggle-icon"})),C.a.createElement(M,{isVisible:l,onClose:this.hideMenu,position:a,context:this.popoverContext.current,className:u},o))}}]),t}(E.Component));b()(L,"propTypes",{translate:k.a.func,toggleTitle:k.a.string,position:k.a.string,disabled:k.a.bool,onClick:k.a.func,onToggle:k.a.func,popoverClassName:k.a.string}),b()(L,"defaultProps",{onClick:w.noop,onToggle:w.noop});var B=Object(g.localize)(L),A=n(260),z=n.n(A),V=(n(826),function(e){function t(){return o()(this,t),l()(this,u()(t).apply(this,arguments))}return h()(t,e),r()(t,[{key:"render",value:function(){var e=P()("external-link",this.props.className,{"icon-first":!!this.props.showIconFirst},{"has-icon":!!this.props.icon}),t=Object(w.assign)({},Object(w.omit)(this.props,"icon","iconSize","showIconFirst","iconClassName"),{className:e,rel:"external"});t.target&&(t.rel=t.rel.concat(" noopener noreferrer"));var n=C.a.createElement(R.a,{className:this.props.iconClassName,icon:"external",size:this.props.iconSize});return C.a.createElement("a",t,this.props.icon&&this.props.showIconFirst&&n,this.props.children,this.props.icon&&!this.props.showIconFirst&&n)}}]),t}(E.Component));b()(V,"defaultProps",{iconSize:18,showIconFirst:!1}),b()(V,"propTypes",{className:k.a.string,href:k.a.string,onClick:k.a.func,icon:k.a.bool,iconSize:k.a.number,target:k.a.string,showIconFirst:k.a.bool,iconClassName:k.a.string});var F=V,H=function(e){function t(){var e,n;o()(this,t);for(var a=arguments.length,i=new Array(a),r=0;r<a;r++)i[r]=arguments[r];return n=l()(this,(e=u()(t)).call.apply(e,[this].concat(i))),b()(d()(n),"handleMouseOver",function(e){n.props.focusOnHover&&e.target.focus(),n.props.onMouseOver()}),n}return h()(t,e),r()(t,[{key:"render",value:function(){var e=this.props,t=e.children,n=e.className,a=e.href,o=e.icon,i=e.isSelected,r=e.isExternalLink,s=Object(w.omit)(this.props,"icon","focusOnHover","isSelected","isExternalLink","className","itemComponent"),l=P()("popover__menu-item",n,{"is-selected":i}),c=this.props.itemComponent;return r&&a?(c=F,s.icon=!0):a&&(c="a"),C.a.createElement(c,z()({role:"menuitem",onMouseOver:this.handleMouseOver,tabIndex:"-1",className:l},s),o&&C.a.createElement(R.a,{icon:o,size:18}),t)}}]),t}(E.Component);b()(H,"propTypes",{href:k.a.string,className:k.a.string,isSelected:k.a.bool,icon:k.a.string,focusOnHover:k.a.bool,onMouseOver:k.a.func,isExternalLink:k.a.bool,itemComponent:k.a.oneOfType([k.a.func,k.a.string])}),b()(H,"defaultProps",{isSelected:!1,focusOnHover:!0,onMouseOver:w.noop,itemComponent:"button"});var U=n(680),K=n(677),W=n(127),Y=n(11),J=function(e){var t=e.orderId,n=e.siteId,a=e.refundDialog,o=e.createdDate,i=e.refundableAmount,r=e.currency,s=e.labelId,l=e.translate,c=e.moment,u=e.label,p=void 0===u?{}:u,d=function(){return Object(O.a)(i,r)},m=function(){return e.closeRefundDialog(t,n)},h=[{action:"cancel",label:l("Cancel"),onClick:m},{action:"confirm",onClick:function(){return e.confirmRefund(t,n)},isPrimary:!0,disabled:a&&a.isSubmitting,additionalClassNames:a&&a.isSubmitting?"is-busy":"",label:l("Refund label (-%(amount)s)",{args:{amount:d()}})}];return C.a.createElement(U.a,{additionalClassNames:"label-refund-modal woocommerce wcc-root",isVisible:Boolean(a&&a.labelId===s),onClose:m,buttons:h},C.a.createElement(K.a,null,l("Request a refund")),C.a.createElement("p",null,l("You can request a refund for a shipping label that has not been used to ship a package. It will take at least %(days)s days to process.",{args:{days:"dhlexpress"===p.carrier_id?"31":"14"}})),C.a.createElement("dl",null,C.a.createElement("dt",null,l("Purchase date")),C.a.createElement("dd",null,c(o).format("LLL")),C.a.createElement("dt",null,l("Amount eligible for refund")),C.a.createElement("dd",null,d())))};J.propTypes={siteId:k.a.number.isRequired,orderId:k.a.number.isRequired,refundDialog:k.a.object,createdDate:k.a.number,refundableAmount:k.a.number,currency:k.a.string,labelId:k.a.number,closeRefundDialog:k.a.func.isRequired,confirmRefund:k.a.func.isRequired};var X=Object(v.b)(function(e,t){var n=t.orderId,a=t.siteId,o=t.labelId,i=Object(Y.x)(e,n,a),r=Object(Y.k)(e,n,a);return{refundDialog:i?r.refundDialog:{},label:Object(Y.g)(e,n,a,o)}},function(e){return Object(I.b)({closeRefundDialog:W.e,confirmRefund:W.k},e)})(Object(g.localize)(J)),G=n(693),Q=n(186),Z=function(e){var t=e.orderId,n=e.siteId,a=e.reprintDialog,o=e.paperSize,i=e.storeOptions,r=e.labelId,s=e.translate,l=function(){return e.closeReprintDialog(t,n)},c=[{action:"cancel",label:s("Cancel"),onClick:l},{action:"confirm",onClick:function(){return e.confirmReprint(t,n)},isPrimary:!0,disabled:a&&!a.fileData,additionalClassNames:a&&a.isFetching?"is-busy":"",label:s("Print")}];return C.a.createElement(U.a,{isVisible:Boolean(a&&a.labelId===r),onClose:l,buttons:c,additionalClassNames:"label-reprint-modal woocommerce wcc-root"},C.a.createElement(K.a,null,s("Reprint shipping label")),C.a.createElement("p",null,s("If there was a printing error when you purchased the label, you can print it again.")),C.a.createElement("p",{className:"shipping-label__reprint-modal-notice"},s("NOTE: If you already used the label in a package, printing and using it again is a violation of our terms of service and may result in criminal charges.")),C.a.createElement(G.a,{id:"paper_size",valuesMap:Object(Q.a)(i.origin_country),title:s("Paper size"),value:o,updateValue:function(a){return e.updatePaperSize(t,n,a)}}))};Z.propTypes={siteId:k.a.number.isRequired,orderId:k.a.number.isRequired,reprintDialog:k.a.object,paperSize:k.a.string.isRequired,storeOptions:k.a.object.isRequired,labelId:k.a.number,closeReprintDialog:k.a.func.isRequired,confirmReprint:k.a.func.isRequired};var $=Object(v.b)(function(e,t){var n=t.orderId,a=t.siteId,o=Object(Y.x)(e,n,a),i=Object(Y.k)(e,n,a);return{reprintDialog:o?i.reprintDialog:{},paperSize:i.paperSize,storeOptions:o?i.storeOptions:{}}},function(e){return Object(I.b)({closeReprintDialog:W.f,confirmReprint:W.l,updatePaperSize:W.Z},e)})(Object(g.localize)(Z)),ee=n(42),te=function(e){var t=e.orderId,n=e.siteId,a=e.isVisible,o=e.labelIndex,i=e.serviceName,r=e.packageName,s=e.productNames,l=e.canManagePayments,c=e.receiptId,u=e.translate,p=function(){return e.closeDetailsDialog(t,n)},d=[{action:"close",label:u("Close"),onClick:p}];return C.a.createElement(U.a,{additionalClassNames:"label-details-modal woocommerce wcc-root",isVisible:a,onClose:p,buttons:d},C.a.createElement(K.a,{className:"shipping-label__label-details-modal-heading"},C.a.createElement("span",{className:"shipping-label__label-details-modal-heading-title"},u("Label #%(labelIndex)s details",{args:{labelIndex:o+1}})),l&&c?C.a.createElement("a",{href:"".concat("https://wordpress.com","/me/purchases/billing/").concat(c),target:"_blank",rel:"noopener noreferrer"},u("Receipt")):null),C.a.createElement("dl",null,C.a.createElement("dt",null,u("Service")),C.a.createElement("dd",null,i),C.a.createElement("dt",null,u("Package")),C.a.createElement("dd",null,r),C.a.createElement("dt",null,u("Items")),C.a.createElement("dd",null,C.a.createElement("ul",null,s.map(function(e,t){return C.a.createElement("li",{key:t},e)})))))};te.propTypes={siteId:k.a.number.isRequired,orderId:k.a.number.isRequired,isVisible:k.a.bool,serviceName:k.a.string,packageName:k.a.string,productNames:k.a.array,closeDetailsDialog:k.a.func.isRequired,receiptId:k.a.number};var ne=Object(v.b)(function(e,t){var n=t.orderId,a=t.siteId,o=t.labelId,i=Object(Y.x)(e,n,a),r=Object(Y.k)(e,n,a).detailsDialog;return{isVisible:Boolean(i&&r&&r.labelId===o),canManagePayments:Object(ee.t)(e,a)}},function(e){return Object(I.b)({closeDetailsDialog:W.c},e)})(Object(g.localize)(te)),ae={usps:function(e){return"https://tools.usps.com/go/TrackConfirmAction.action?tLabels=".concat(e)},fedex:function(e){return"https://www.fedex.com/apps/fedextrack/?action=track&tracknumbers=".concat(e)},ups:function(e){return"https://www.ups.com/track?loc=en_US&tracknum=".concat(e)},dhlexpress:function(e){return"https://www.dhl.com/en/express/tracking.html?AWB=".concat(e,"&brand=DHL")}},oe=function(e){var t=e.tracking,n=e.carrierId,a=e.translate;if(!t)return C.a.createElement("span",null,a("N/A"));var o=ae[n](t);return o?C.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:o},t," ",C.a.createElement(R.a,{icon:"external",size:12})):C.a.createElement("span",null,t)};oe.propTypes={tracking:k.a.string,carrierId:k.a.string};var ie=Object(g.localize)(oe),re=function(e){function t(){var e,n;o()(this,t);for(var a=arguments.length,i=new Array(a),r=0;r<a;r++)i[r]=arguments[r];return n=l()(this,(e=u()(t)).call.apply(e,[this].concat(i))),b()(d()(n),"renderRefund",function(e,t,a,o){var i=n.props,r=i.orderId,s=i.siteId,l=i.translate,c="",u=!1;if(t?(c=l("Labels older than 30 days cannot be refunded."),u=!0):"usps"!==a||o||(c=l("USPS labels without tracking are not eligible for refund."),u=!0),u)return C.a.createElement(D.a,{position:"top left",text:c},C.a.createElement("button",{className:"popover__menu-item shipping-label__item-menu-reprint-expired",role:"menuitem",tabIndex:"-1"},C.a.createElement(R.a,{icon:"refund",size:18}),C.a.createElement("span",null," ",l("Request refund")," ")));return C.a.createElement(H,{onClick:function(){n.props.openRefundDialog(r,s,e)},icon:"refund"},l("Request refund"))}),b()(d()(n),"renderReprint",function(e,t){var a=n.props,o=a.orderId,i=a.siteId,r=a.translate;if(t)return C.a.createElement(D.a,{position:"top left",text:r("Label images older than 180 days are deleted by our technology partners for general security and data privacy concerns.")},C.a.createElement("button",{className:"popover__menu-item shipping-label__item-menu-reprint-expired",role:"menuitem",tabIndex:"-1"},C.a.createElement(R.a,{icon:"print",size:18}),C.a.createElement("span",null," ",r("Reprint")," ")));return C.a.createElement(H,{onClick:function(){n.props.openReprintDialog(o,i,e)},icon:"print"},r("Reprint shipping label"))}),b()(d()(n),"renderLabelDetails",function(e){var t=n.props,a=t.orderId,o=t.siteId,i=t.translate;return C.a.createElement(H,{onClick:function(){n.props.openDetailsDialog(a,o,e)},icon:"info-outline"},i("View details"))}),b()(d()(n),"renderPickup",function(e){var t=n.props.translate,a={usps:"https://tools.usps.com/schedule-pickup-steps.htm",fedex:"https://www.fedex.com/en-us/shipping/schedule-manage-pickups.html",ups:"https://wwwapps.ups.com/pickup/request",dhlexpress:"https://mydhl.express.dhl/us/en/schedule-pickup.html#/schedule-pickup#label-reference"};if(!a.hasOwnProperty(e))return null;return C.a.createElement(H,{onClick:function(){window.open(a[e],"_blank")},icon:"external"},t("Schedule a pickup"))}),n}return h()(t,e),r()(t,[{key:"renderCommercialInvoiceLink",value:function(){var e=this.props,t=e.translate,n=e.label.commercialInvoiceUrl;if(!n)return null;return C.a.createElement(H,{onClick:function(){window.open(n)},icon:"print"},t("Print customs form"))}},{key:"render",value:function(){var e=this.props,t=e.label,n=t.labelIndex,a=t.serviceName,o=t.packageName,i=t.productNames,r=t.receiptId,s=t.labelId,l=t.createdDate,c=t.refundableAmount,u=t.currency,p=t.showDetails,d=t.expiryDate,m=t.anonymized,h=t.usedDate,f=t.tracking,b=t.carrierId,v=t.commercialInvoiceUrl,g=e.siteId,y=e.orderId,k=e.translate,E=e.isModal,w=(new Date).getTime(),N=!1,_=!1;(m||h||d&&d<w)&&(N=!0);var R=(new Date).setDate((new Date).getDate()-30);return(m||h||l&&l<R)&&(_=!0),C.a.createElement("div",{className:"shipping-label__item"},C.a.createElement("p",{className:"shipping-label__item-detail"},k("%(service)s label (#%(labelIndex)d)",{args:{service:a,labelIndex:n+1}}),p&&C.a.createElement("span",null,!E&&C.a.createElement(B,{position:"bottom left"},this.renderLabelDetails(s),this.renderPickup(b),this.renderRefund(s,_,b,f),this.renderReprint(s,N),this.renderCommercialInvoiceLink(v)),C.a.createElement(ne,{siteId:g,orderId:y,labelIndex:n,serviceName:a,packageName:o,productNames:i,receiptId:r,labelId:s}),C.a.createElement(X,{siteId:g,orderId:y,createdDate:l,refundableAmount:c,currency:u,labelId:s}),C.a.createElement($,{siteId:g,orderId:y,labelId:s}))),p&&C.a.createElement("p",{className:"shipping-label__item-tracking"},k("Tracking #: {{trackingLink/}}",{components:{trackingLink:C.a.createElement(ie,{carrierId:b,tracking:f})}})))}}]),t}(E.Component);re.propTypes={siteId:k.a.number.isRequired,orderId:k.a.number.isRequired,label:k.a.shape({serviceName:k.a.string.isRequired,labelIndex:k.a.number.isRequired,packageName:k.a.string.isRequired,productNames:k.a.string.isRequired,receiptId:k.a.number.isRequired,labelId:k.a.number.isRequired,createdDate:k.a.string.isRequired,refundableAmount:k.a.number.isRequired,currency:k.a.string.isRequired,showDetails:k.a.bool.isRequired,expiryDate:k.a.string.isRequired,anonymized:k.a.bool.isRequired,usedDate:k.a.string.isRequired,tracking:k.a.string.isRequired,carrierId:k.a.string.isRequired,commercialInvoiceUrl:k.a.string}).isRequired,isModal:k.a.bool.isRequired,openRefundDialog:k.a.func.isRequired,openReprintDialog:k.a.func.isRequired,openDetailsDialog:k.a.func.isRequired};var se=Object(v.b)(null,function(e){return Object(I.b)({openRefundDialog:W.y,openReprintDialog:W.z,openDetailsDialog:W.u},e)})(Object(g.localize)(re)),le=function(e){function t(){return o()(this,t),l()(this,u()(t).apply(this,arguments))}return h()(t,e),r()(t,[{key:"render",value:function(){var e=this.props,t=e.label,n=e.translate,a=t.serviceName,o=t.labelIndex;return C.a.createElement("div",{className:"shipping-label__item"},C.a.createElement("p",{className:"shipping-label__item-detail"},n("%(service)s label (#%(labelIndex)d)",{args:{service:a,labelIndex:o+1}}),C.a.createElement("br",null),n("Purchasing\u2026")))}}]),t}(re);re.propTypes={label:k.a.object.isRequired};var ce=Object(g.localize)(le),ue=n(152),pe=function(e){function t(){var e,n,a;o()(this,t);for(var i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return a=l()(this,(e=u()(t)).call.apply(e,[this].concat(r))),b()(d()(a),"eventPropsByType",(n={},b()(n,N.a.INTERNAL_NOTE,function(e){return{icon:"aside",heading:(0,a.props.translate)("Internal note"),content:Object(ue.a)(Object(ue.b)(e.content))}}),b()(n,N.a.CUSTOMER_NOTE,function(e){return{icon:"mail",heading:(0,a.props.translate)("Note sent to customer"),content:Object(ue.a)(Object(ue.b)(e.content))}}),b()(n,N.a.LABEL_PURCHASING,function(e){return{icon:"sync",content:C.a.createElement(ce,{label:e,orderId:a.props.orderId,siteId:a.props.siteId})}}),b()(n,N.a.LABEL_PURCHASED,function(e){return{icon:"print",content:C.a.createElement(se,{label:e,orderId:a.props.orderId,siteId:a.props.siteId,isModal:a.props.isModal})}}),b()(n,N.a.LABEL_REFUND_REQUESTED,function(e){var t=a.props.translate;return{icon:"time",content:C.a.createElement("div",null,t("%(service)s label (#%(labelNum)d) refund requested (%(amount)s)",{args:{service:e.serviceName,labelNum:e.labelIndex+1,amount:Object(O.a)(e.amount,e.currency)}}))}}),b()(n,N.a.LABEL_REFUND_COMPLETED,function(e){var t=a.props.translate;return{icon:"refund",content:C.a.createElement("div",null,t("%(service)s label (#%(labelNum)d) refunded (%(amount)s)",{args:{service:e.serviceName,labelNum:e.labelIndex+1,amount:Object(O.a)(e.amount,e.currency)}}))}}),b()(n,N.a.LABEL_REFUND_REJECTED,function(e){var t=a.props.translate;return{icon:"cross-small",content:C.a.createElement("div",null,t("%(service)s label (#%(labelNum)d) refund rejected",{service:e.serviceName,args:{labelNum:e.labelIndex+1}}))}}),b()(n,N.a.REFUND_NOTE,function(e){var t=a.props.translate;return{icon:"credit-card",heading:t("Refund"),content:C.a.createElement("div",null,t("Refunded %(amount)s",{args:{amount:Object(O.a)(e.amount,e.currency)}}),C.a.createElement("br",null),e.reason)}}),b()(n,void 0,function(){return{}}),n)),b()(d()(a),"renderDefaultEvent",function(e){return{icon:"aside",heading:(0,a.props.translate)("Note"),content:e.content}}),a}return h()(t,e),r()(t,[{key:"render",value:function(){var e=this.props,t=e.moment,n=e.event,a=(this.eventPropsByType[n.type]||this.renderDefaultEvent)(n),o=a.icon,i=a.heading,r=a.content;return C.a.createElement("div",{className:"order-activity-log__note"},C.a.createElement("div",{className:"order-activity-log__note-meta"},C.a.createElement("span",{className:"order-activity-log__note-time"},t(n.timestamp).format("LT")),o&&C.a.createElement(R.a,{icon:o,size:24})),C.a.createElement("div",{className:"order-activity-log__note-body"},C.a.createElement("div",{className:"order-activity-log__note-type"},i),C.a.createElement("div",{className:"order-activity-log__note-content"},r)))}}]),t}(E.Component);b()(pe,"propTypes",{customer_note:k.a.bool,date_created_gmt:k.a.string,note:k.a.string.isRequired}),b()(pe,"propTypes",{event:k.a.object}),b()(pe,"defaultProps",{event:{}});var de=Object(g.localize)(pe),me=n(690),he=function(e){function t(){var e,n;o()(this,t);for(var a=arguments.length,i=new Array(a),r=0;r<a;r++)i[r]=arguments[r];return n=l()(this,(e=u()(t)).call.apply(e,[this].concat(i))),b()(d()(n),"onClick",function(){n.props.onClick(n.props.date)}),n}return h()(t,e),r()(t,[{key:"render",value:function(){var e=this.props,t=e.count,n=e.date,a=e.isOpen,o=e.moment,i=e.translate,r=o(n,"YYYYMMDD").format("ll"),s=C.a.createElement("div",null,C.a.createElement("h3",null,r),C.a.createElement("small",null,i("%(count)s event","%(count)s events",{count:t,args:{count:t}})));return C.a.createElement("div",{className:"order-activity-log__day"},C.a.createElement(me.a,{onClick:this.onClick,className:"order-activity-log__day-header",expanded:a,header:s,screenReaderText:i("Show notes from %(date)s",{args:{date:r}})},this.props.children))}}]),t}(E.Component);b()(he,"propTypes",{count:k.a.number.isRequired,date:k.a.string.isRequired,isOpen:k.a.bool.isRequired,onClick:k.a.func.isRequired});var fe=Object(g.localize)(he);var be=function(e){function t(){var e,n;o()(this,t);for(var a=arguments.length,i=new Array(a),r=0;r<a;r++)i[r]=arguments[r];return n=l()(this,(e=u()(t)).call.apply(e,[this].concat(i))),b()(d()(n),"toggleOpenDay",function(e){n.setState(function(){return{openDay:e}})}),b()(d()(n),"renderNotes",function(){var e=n.props,t=e.days,a=e.eventsByDay,o=e.translate;return t.length?C.a.createElement("div",null,t.map(function(e){var t=a[e];return C.a.createElement(fe,{key:e,count:t.length,date:e,isOpen:e===n.state.openDay,onClick:n.toggleOpenDay},t.map(function(e){return C.a.createElement(de,{key:"".concat(e.type,"-").concat(e.key),event:e,orderId:n.props.orderId,siteId:n.props.siteId,isModal:n.props.isModal})}))})):C.a.createElement("p",null,o("No activity yet"))}),b()(d()(n),"renderPlaceholder",function(){return C.a.createElement("div",{className:"is-placeholder"},C.a.createElement(fe,{count:0,date:"",isOpen:!0,index:1,onClick:w.noop},C.a.createElement(de,null)))}),n}return h()(t,e),r()(t,[{key:"UNSAFE_componentWillMount",value:function(){this.setState({openDay:Object(w.last)(Object(w.keys)(this.props.eventsByDay))})}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){var t=Object(w.last)(Object(w.keys)(e.eventsByDay));this.props.eventsByDay[t]||this.setState({openDay:t})}},{key:"render",value:function(){return this.props.isLoaded?this.renderNotes():this.renderPlaceholder()}}]),t}(E.Component);b()(be,"propTypes",{orderId:k.a.number.isRequired,siteId:k.a.number.isRequired});t.a=Object(v.b)(function(e,t){var n=t.orderId||!1,a=Object(N.c)(e,n),o=Object(N.b)(e,n),i=o.length?function(e){var t={};return e.forEach(function(e){var n=Object(g.moment)(e.timestamp).format("YYYYMMDD");t[n]?t[n].push(e):t[n]=[e]}),Object(w.keys)(t).forEach(function(e){t[e]=Object(w.sortBy)(t[e],["timestamp","key"]).reverse()}),t}(o):{},r=i?Object(w.keys)(i):[];return r.sort().reverse(),{isLoaded:a,days:r,events:o,eventsByDay:i}})(Object(g.localize)(be))},824:function(e,t,n){},825:function(e,t,n){},826:function(e,t,n){}}]);