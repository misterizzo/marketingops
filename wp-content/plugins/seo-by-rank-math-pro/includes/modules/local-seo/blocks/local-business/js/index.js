(()=>{"use strict";var e={991:e=>{e.exports=function e(t,r){if(t===r)return!0;if(t&&r&&"object"==typeof t&&"object"==typeof r){if(t.constructor!==r.constructor)return!1;var o,n,a;if(Array.isArray(t)){if((o=t.length)!=r.length)return!1;for(n=o;0!=n--;)if(!e(t[n],r[n]))return!1;return!0}if(t instanceof Map&&r instanceof Map){if(t.size!==r.size)return!1;for(n of t.entries())if(!r.has(n[0]))return!1;for(n of t.entries())if(!e(n[1],r.get(n[0])))return!1;return!0}if(t instanceof Set&&r instanceof Set){if(t.size!==r.size)return!1;for(n of t.entries())if(!r.has(n[0]))return!1;return!0}if(ArrayBuffer.isView(t)&&ArrayBuffer.isView(r)){if((o=t.length)!=r.length)return!1;for(n=o;0!=n--;)if(t[n]!==r[n])return!1;return!0}if(t.constructor===RegExp)return t.source===r.source&&t.flags===r.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===r.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===r.toString();if((o=(a=Object.keys(t)).length)!==Object.keys(r).length)return!1;for(n=o;0!=n--;)if(!Object.prototype.hasOwnProperty.call(r,a[n]))return!1;for(n=o;0!=n--;){var l=a[n];if(!e(t[l],r[l]))return!1}return!0}return t!=t&&r!=r}}},t={};function r(o){var n=t[o];if(void 0!==n)return n.exports;var a=t[o]={exports:{}};return e[o](a,a.exports,r),a.exports}r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var o in t)r.o(t,o)&&!r.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{const e=wp.blocks,t=lodash,o=wp.i18n,n=wp.data,a=wp.blockEditor,l=wp.components,s=React,i=wp.element;var u=r(991),p=r.n(u);const c=wp.compose,m=wp.apiFetch;var h=r.n(m);const _=wp.url,b={};function f({className:e}){return(0,s.createElement)(l.Placeholder,{className:e},(0,o.__)("Block rendered as empty."))}function y({response:e,className:t}){const r=(0,o.sprintf)((0,o.__)("Error loading block: %s"),e.errorMsg);return(0,s.createElement)(l.Placeholder,{className:t},r)}function d({children:e,showLoader:t}){return(0,s.createElement)("div",{style:{position:"relative"}},t&&(0,s.createElement)("div",{style:{position:"absolute",top:"50%",left:"50%",marginTop:"-9px",marginLeft:"-9px"}},(0,s.createElement)(l.Spinner,null)),(0,s.createElement)("div",{style:{opacity:t?"0.3":1}},e))}function g(t){const{attributes:r,block:o,className:n,httpMethod:a="GET",urlQueryArgs:l,skipBlockSupportAttributes:u=!1,EmptyResponsePlaceholder:m=f,ErrorResponsePlaceholder:g=y,LoadingResponsePlaceholder:w=d}=t,k=(0,i.useRef)(!0),[S,v]=(0,i.useState)(!1),E=(0,i.useRef)(),[C,A]=(0,i.useState)(null),T=(0,c.usePrevious)(t),[P,x]=(0,i.useState)(!1);function M(){var t,n;if(!k.current)return;x(!0);let s=r&&(0,e.__experimentalSanitizeBlockAttributes)(o,r);u&&(s=function(e){const{backgroundColor:t,borderColor:r,fontFamily:o,fontSize:n,gradient:a,textColor:l,className:s,...i}=e,{border:u,color:p,elements:c,spacing:m,typography:h,..._}=e?.style||b;return{...i,style:_}}(s));const i="POST"===a,p=i?null:null!==(t=s)&&void 0!==t?t:null,c=function(e,t=null,r={}){return(0,_.addQueryArgs)(`/wp/v2/block-renderer/${e}`,{context:"edit",...null!==t?{attributes:t}:{},...r})}(o,p,l),m=i?{attributes:null!==(n=s)&&void 0!==n?n:null}:null,f=E.current=h()({path:c,data:m,method:i?"POST":"GET"}).then((e=>{k.current&&f===E.current&&e&&A(e.rendered)})).catch((e=>{k.current&&f===E.current&&A({error:!0,errorMsg:e.message})})).finally((()=>{k.current&&f===E.current&&x(!1)}));return f}const O=(0,c.useDebounce)(M,500);(0,i.useEffect)((()=>()=>{k.current=!1}),[]),(0,i.useEffect)((()=>{void 0===T?M():p()(T,t)||O()})),(0,i.useEffect)((()=>{if(!P)return;const e=setTimeout((()=>{v(!0)}),1e3);return()=>clearTimeout(e)}),[P]);const R=!!C,L=""===C,j=C?.error;return P?(0,s.createElement)(w,{...t,showLoader:S},R&&(0,s.createElement)(i.RawHTML,{className:n},C)):L||!R?(0,s.createElement)(m,{...t}):j?(0,s.createElement)(g,{response:C,...t}):(0,s.createElement)(i.RawHTML,{className:n},C)}const w={},k=(0,n.withSelect)((e=>{const t=e("core/editor");if(t){const e=t.getCurrentPostId();if(e&&"number"==typeof e)return{currentPostId:e}}return w}))((({urlQueryArgs:e=w,currentPostId:t,...r})=>{const o=(0,i.useMemo)((()=>t?{post_id:t,...e}:e),[t,e]);return(0,s.createElement)(g,{urlQueryArgs:o,...r})}));function S(e){return S="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},S(e)}function v(e,t,r){return(t=function(e){var t=function(e,t){if("object"!==S(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,t||"default");if("object"!==S(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===S(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var E=function(e,r){var o=[];return(0,t.forEach)(e,(function(e,t){"boolean"===e.type&&o.push(wp.element.createElement(l.ToggleControl,{label:e.label,checked:r.attributes[t],onChange:function(e){return r.setAttributes(v({},t,e))}})),"string"===e.type&&o.push(wp.element.createElement(l.TextControl,{label:e.label,value:r.attributes[t],onChange:function(e){return r.setAttributes(v({},t,e))}})),"select"===e.type&&o.push(wp.element.createElement(l.SelectControl,{label:e.label,value:r.attributes[t],options:e.options,onChange:function(e){return r.setAttributes(v({},t,e))}})),"range"===e.type&&o.push(wp.element.createElement(l.RangeControl,{label:e.label,value:r.attributes[t],onChange:function(e){return r.setAttributes(v({},t,e))},min:e.min,max:e.max}))})),o},C=function(e){var t={show_company_name:{label:(0,o.__)("Show Company Name","rank-math-pro"),type:"boolean"},show_company_address:{label:(0,o.__)("Show Company Address","rank-math-pro"),type:"boolean"},show_on_one_line:{label:(0,o.__)("Show address on one line","rank-math-pro"),type:"boolean"},show_state:{label:(0,o.__)("Show State","rank-math-pro"),type:"boolean"},show_country:{label:(0,o.__)("Show Country","rank-math-pro"),type:"boolean"},show_telephone:{label:(0,o.__)("Show Primary number","rank-math-pro"),type:"boolean"},show_secondary_number:{label:(0,o.__)("Show Secondary number","rank-math-pro"),type:"boolean"},show_fax:{label:(0,o.__)("Show FAX number","rank-math-pro"),type:"boolean"},show_email:{label:(0,o.__)("Show Email","rank-math-pro"),type:"boolean"},show_url:{label:(0,o.__)("Show Business URL","rank-math-pro"),type:"boolean"},show_logo:{label:(0,o.__)("Show Logo","rank-math-pro"),type:"boolean"},show_vat_id:{label:(0,o.__)("Show VAT number","rank-math-pro"),type:"boolean"},show_tax_id:{label:(0,o.__)("Show TAX ID","rank-math-pro"),type:"boolean"},show_coc_id:{label:(0,o.__)("Show COC number","rank-math-pro"),type:"boolean"},show_pricerange:{label:(0,o.__)("Show Price Indication","rank-math-pro"),type:"boolean"}};return"address"===e.attributes.type&&delete t.show_company_address,E(t,e)},A=function(e){var r=[],n=e.attributes.type;if("address"===n&&r.push(wp.element.createElement(l.ToggleControl,{label:(0,o.__)("Show Opening Hours","rank-math-pro"),checked:e.attributes.show_opening_hours,onChange:function(t){return e.setAttributes({show_opening_hours:t})}})),"opening-hours"===n||e.attributes.show_opening_hours){var a=e.attributes.show_days.split(",");(0,t.forEach)(["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],(function(t){r.push(wp.element.createElement(l.ToggleControl,{label:(0,o.sprintf)((0,o.__)("Show %s","rank-math-pro"),t),checked:a.includes(t),onChange:function(){var r=a.indexOf(t);r>-1?a.splice(r,1):a.push(t),e.setAttributes({show_days:a.toString()})}}))})),r.push(wp.element.createElement(l.ToggleControl,{label:(0,o.__)("Hide Closed Days","rank-math-pro"),checked:e.attributes.hide_closed_days,onChange:function(t){return e.setAttributes({hide_closed_days:t})}})),r.push(wp.element.createElement(l.ToggleControl,{label:(0,o.__)("Show open now label after opening hour for current day","rank-math-pro"),checked:e.attributes.show_opening_now_label,onChange:function(t){return e.setAttributes({show_opening_now_label:t})}})),e.attributes.show_opening_now_label&&r.push(wp.element.createElement(l.TextControl,{label:(0,o.__)("Show open now label after opening hour for current day","rank-math-pro"),value:e.attributes.opening_hours_note,onChange:function(t){return e.setAttributes({opening_hours_note:t})}}))}return r},T=function(e){var t=[],r="store-locator"===e.attributes.type;if(r&&t.push(wp.element.createElement(l.ToggleControl,{label:(0,o.__)("Show Map","rank-math-pro"),checked:e.attributes.show_map,onChange:function(t){return e.setAttributes({show_map:t})}})),r&&!e.attributes.show_map)return t;var n={map_style:{label:(0,o.__)("Map Type","rank-math-pro"),type:"select",options:[{value:"roadmap",label:(0,o.__)("Roadmap","rank-math-pro")},{value:"hybrid",label:(0,o.__)("Hybrid","rank-math-pro")},{value:"satellite",label:(0,o.__)("Satellite","rank-math-pro")},{value:"terrain",label:(0,o.__)("Terrain","rank-math-pro")}]},map_width:{label:(0,o.__)("Map Width","rank-math-pro"),type:"string"},map_height:{label:(0,o.__)("Map Height","rank-math-pro"),type:"string"},show_category_filter:{label:(0,o.__)("Show Category filter","rank-math-pro"),type:"boolean"},zoom_level:{label:(0,o.__)("Zoom Level","rank-math-pro"),type:"range",min:-1,max:19},allow_zoom:{label:(0,o.__)("Allow Zoom","rank-math-pro"),type:"boolean"},allow_scrolling:{label:(0,o.__)("Allow Zoom by scroll","rank-math-pro"),type:"boolean"},allow_dragging:{label:(0,o.__)("Allow Dragging","rank-math-pro"),type:"boolean"},show_marker_clustering:{label:(0,o.__)("Show Marker Clustering","rank-math-pro"),type:"boolean"},show_infowindow:{label:(0,o.__)("Show InfoWindow","rank-math-pro"),type:"boolean"},show_route_planner:{label:(0,o.__)("Show Route Planner","rank-math-pro"),type:"boolean"},route_label:{label:(0,o.__)("Route Label","rank-math-pro"),type:"string"}};return r||(delete n.show_route_planner,delete n.route_label),t.concat(E(n,e))},P=function(e,t){var r=(0,o.__)("Address Settings","rank-math-pro");return"getHoursSettings"===e?r=(0,o.__)("Opening Hours Settings","rank-math-pro"):"getMapSettings"===e&&(r=(0,o.__)("Map Settings","rank-math-pro")),wp.element.createElement(l.PanelBody,{title:r},"getHoursSettings"===e&&A(t),"getAddressSettings"===e&&C(t),"getMapSettings"===e&&T(t))};const x=(0,n.withSelect)((function(e){var t=e("core").getEntityRecords("postType","rank_math_locations",{per_page:-1}),r=[];t&&(r.push({value:0,label:(0,o.__)("All Locations","rank-math-pro")}),t.forEach((function(e){r.push({value:e.id,label:e.title.rendered})})));var n=e("core").getEntityRecords("taxonomy","rank_math_location_category",{per_page:-1}),a=[];return n&&n.forEach((function(e){a.push({value:e.id,label:e.name})})),{locationsData:r,termsData:a}}))((function(e){var t=(0,a.useBlockProps)(),r=e.className,n=e.setAttributes,s=e.attributes,i=e.locationsData,u=e.termsData,p=rankMath.localBusiness;return s.limit||n({limit:p.limit}),s.map_style||n({map_style:p.map_style}),s.route_label||n({route_label:p.route_label}),wp.element.createElement("div",t,wp.element.createElement("div",{id:"rank-math-local",className:"rank-math-block "+r},wp.element.createElement(a.InspectorControls,{key:"inspector"},wp.element.createElement(l.PanelBody,{title:(0,o.__)("Settings","rank-math-pro"),initialOpen:"true"},wp.element.createElement(l.SelectControl,{label:(0,o.__)("Type","rank-math-pro"),value:s.type,options:[{value:"address",label:(0,o.__)("Address","rank-math-pro")},{value:"opening-hours",label:(0,o.__)("Opening Hours","rank-math-pro")},{value:"map",label:(0,o.__)("Map","rank-math-pro")},{value:"store-locator",label:(0,o.__)("Store Locator","rank-math-pro")}],onChange:function(e){return n({type:e})}}),"store-locator"!==s.type&&wp.element.createElement(l.SelectControl,{label:(0,o.__)("Locations","rank-math-pro"),value:s.locations,options:i,onChange:function(e){return n({locations:e})}}),"store-locator"!==s.type&&wp.element.createElement(l.SelectControl,{label:(0,o.__)("Location Categories","rank-math-pro"),multiple:!0,value:s.terms,options:u,onChange:function(e){return n({terms:e})}}),wp.element.createElement(l.TextControl,{type:"number",label:(0,o.__)("Maximum number of locations to show","rank-math-pro"),value:s.limit,onChange:function(t){return e.setAttributes({limit:t})}}),"address"===s.type&&C(e),"opening-hours"===s.type&&A(e),"map"===s.type&&T(e),"store-locator"===s.type&&function(e){var t={show_radius:{label:(0,o.__)("Show radius","rank-math-pro"),type:"boolean"},search_radius:{label:(0,o.__)("Search Locations within the radius","rank-math-pro"),type:"range",min:5,max:1e3},show_category_filter:{label:(0,o.__)("Add dropdown to filter results by category","rank-math-pro"),type:"boolean"},show_nearest_location:{label:(0,o.__)("Show nearest location if none is found within radius","rank-math-pro"),type:"boolean"}};return E(t,e)}(e)),"address"===s.type&&P("getHoursSettings",e),("map"===s.type||"store-locator"===s.type)&&P("getAddressSettings",e),"store-locator"===s.type&&P("getMapSettings",e)),function(e){return"map"===e.type?wp.element.createElement("img",{src:rankMath.previewImage,alt:(0,o.__)("Preview Image","rank-math-pro")}):wp.element.createElement(k,{block:"rank-math/local-business",attributes:e})}(s)))}));(0,e.registerBlockType)("rank-math/local-business",{edit:x})})()})();